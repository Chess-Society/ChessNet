import{E as p,a as S}from"./B20hpX-x.js";function m(o,r,c,t){const s=new p,d=[245,158,11];s.setFontSize(22),s.setTextColor(d[0],d[1],d[2]),s.text(o.name,14,20),s.setFontSize(12),s.setTextColor(100);const l=new Date(o.date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});s.text(`${l} - ${o.format} - Ronda ${c}/${t}`,14,28);const n=new Map;o.participants.forEach(e=>n.set(e,0)),o.matches.forEach(e=>{if(!e.result)return;const[h,u]=e.result==="1-0"?[1,0]:e.result==="0-1"?[0,1]:[.5,.5];e.whiteId&&n.set(e.whiteId,(n.get(e.whiteId)||0)+h),e.blackId&&n.set(e.blackId,(n.get(e.blackId)||0)+u)});const g=o.participants.map(e=>({id:e,name:r(e),points:n.get(e)||0})).sort((e,h)=>h.points-e.points).map((e,h)=>[h+1,e.name,e.points.toFixed(1)]);S(s,{startY:35,head:[["Pos","Jugador","Puntos"]],body:g,theme:"grid",headStyles:{fillColor:[30,41,59]},styles:{fontSize:12,cellPadding:3}});const a=s.lastAutoTable.finalY+10;s.setFontSize(10),s.setTextColor(150),s.text("Generado con ChessNet",14,a),s.save(`Clasificacion_${o.name.replace(/\s+/g,"_")}.pdf`)}function D(o,r,c){const t=new p,s=r+1;t.setFontSize(20),t.text(o.name,14,20),t.setFontSize(14),t.text(`Emparejamientos - Ronda ${s}`,14,28);const l=o.matches.filter(n=>n.round===s).map((n,i)=>[i+1,n.whiteId?c(n.whiteId):"BYE",n.result||"- -",n.blackId?c(n.blackId):"BYE"]);S(t,{startY:35,head:[["Mesa","Blancas","Resultado","Negras"]],body:l,theme:"striped",headStyles:{fillColor:[50,50,50]},styles:{fontSize:11,halign:"center"},columnStyles:{1:{halign:"left",fontStyle:"bold"},3:{halign:"left",fontStyle:"bold"}}}),t.save(`Ronda_${s}_${o.name.replace(/\s+/g,"_")}.pdf`)}function w(o,r,c="Escuela de Ajedrez ChessNet"){const t=new p,s=[13,148,136];t.setFillColor(s[0],s[1],s[2]),t.rect(0,0,210,40,"F"),t.setTextColor(255,255,255),t.setFontSize(24),t.setFont("helvetica","bold"),t.text("RECIBO DE PAGO",14,25),t.setFontSize(10),t.setFont("helvetica","normal"),t.text(c,190,15,{align:"right"}),t.text("Gestión Integral",190,20,{align:"right"}),t.text(new Date().toLocaleDateString(),190,25,{align:"right"}),t.setTextColor(0,0,0),t.setDrawColor(200,200,200),t.roundedRect(14,50,182,40,3,3),t.setFontSize(10),t.setTextColor(100),t.text("ID Transacción:",20,60),t.text("Fecha de Pago:",120,60),t.setTextColor(0),t.setFontSize(11),t.text(o.id.split("-")[0].toUpperCase(),20,66),t.text(o.date,120,66),t.setTextColor(100),t.setFontSize(10),t.text("Alumno:",20,78),t.text("Método:",120,78),t.setTextColor(0),t.setFontSize(11),t.text(r,20,84);const d={cash:"Efectivo",transfer:"Transferencia",bizum:"Bizum",other:"Otro"};t.text(d[o.method]||o.method,120,84),S(t,{startY:100,head:[["Concepto / Descripción","Importe"]],body:[[o.concept,`${o.amount.toFixed(2)} €`]],theme:"grid",headStyles:{fillColor:[30,41,59]},columnStyles:{1:{halign:"right",fontStyle:"bold"}},styles:{fontSize:12,cellPadding:5}});const l=t.lastAutoTable.finalY+10;t.setFontSize(14),t.setFont("helvetica","bold"),t.text(`TOTAL PAGADO:  ${o.amount.toFixed(2)} €`,190,l,{align:"right"}),t.setDrawColor(150),t.line(130,l+40,190,l+40),t.setFontSize(8),t.setTextColor(150),t.text("Firma o Sello Conforme",160,l+45,{align:"center"}),t.text("Documento generado automáticamente por ChessNet.io",105,280,{align:"center"}),t.save(`Recibo_${o.date}_${r.replace(/\s+/g,"_")}.pdf`)}function z(o,r,c){const t=new p,s=[219,39,119];t.setFillColor(...s),t.rect(0,0,210,35,"F"),t.setTextColor(255,255,255),t.setFontSize(22),t.setFont("helvetica","bold"),t.text("ChessNet",15,15),t.setFontSize(14),t.setFont("helvetica","normal"),t.text("Historial de Asistencia",15,25),t.setTextColor(0,0,0),t.setFontSize(12),t.setFont("helvetica","bold"),t.text(`Clase: ${o}`,15,45),t.setFont("helvetica","normal"),t.setFontSize(10),t.text(`Generado: ${new Date().toLocaleDateString("es-ES")}`,15,52),t.text(`Total de sesiones: ${r.length}`,15,58);const d=r.map(n=>{const i=n.records.length,g=n.records.filter(u=>u.status==="present").length,a=n.records.filter(u=>u.status==="absent").length,e=n.records.filter(u=>u.status==="excused").length,h=i>0?Math.round(g/i*100):0;return[new Date(n.date).toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),`${g}`,`${a}`,`${e}`,`${h}%`,n.sessionNotes||"-"]});S(t,{startY:65,head:[["Fecha","Presentes","Ausentes","Justif.","% Asist.","Notas"]],body:d,theme:"grid",headStyles:{fillColor:s,textColor:[255,255,255],fontStyle:"bold",fontSize:10},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:45},1:{cellWidth:20,halign:"center"},2:{cellWidth:20,halign:"center"},3:{cellWidth:20,halign:"center"},4:{cellWidth:20,halign:"center",fontStyle:"bold"},5:{cellWidth:"auto"}}});const l=t.lastAutoTable.finalY||200;t.setFontSize(8),t.setTextColor(150),t.text("Documento generado automáticamente por ChessNet.io",105,l+15,{align:"center"}),t.save(`Asistencia_${o.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`)}function y(o,r,c){const s=["Fecha","Notas",...c.map(a=>a.name),"Total Presentes","% Asistencia"],d=r.map(a=>{const e=[];e.push(new Date(a.date).toLocaleDateString("es-ES")),e.push(a.sessionNotes||""),c.forEach(f=>{const b=a.records.find(x=>x.studentId===f.id);if(b){const x={present:"P",absent:"A",excused:"J"};e.push(x[b.status])}else e.push("-")});const h=a.records.filter(f=>f.status==="present").length,u=a.records.length,F=u>0?Math.round(h/u*100):0;return e.push(h.toString()),e.push(`${F}%`),e}),l=[s,...d].map(a=>a.map(e=>`"${e}"`).join(",")).join(`
`),n=new Blob(["\uFEFF"+l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),g=URL.createObjectURL(n);i.setAttribute("href",g),i.setAttribute("download",`Asistencia_${o.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}export{y as a,m as b,D as c,w as d,z as e};
