import{w as u,C as f}from"./B4zm7d7r.js";const c=500,l="chessnet_debug_logs";function w(){if(typeof window>"u")return{entries:[],maxEntries:c};try{const e=localStorage.getItem(l);if(e)return{entries:JSON.parse(e).entries||[],maxEntries:c}}catch(e){console.warn("Failed to load logs from localStorage:",e)}return{entries:[],maxEntries:c}}const r=u(w());let g;r.subscribe(e=>{typeof window>"u"||(clearTimeout(g),g=setTimeout(()=>{try{localStorage.setItem(l,JSON.stringify({entries:e.entries.slice(-c)}))}catch(n){console.warn("Failed to persist logs:",n)}},1e3))});function s(e,n,t,o,i){return{id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),level:e,message:n,context:t,data:o,stack:i?.stack,userAgent:typeof navigator<"u"?navigator.userAgent:void 0,url:typeof window<"u"?window.location.href:void 0}}function a(e){r.update(n=>{const t=[...n.entries,e];return t.length>n.maxEntries&&t.shift(),{...n,entries:t}})}const d={debug:(e,n,t)=>{a(s("debug",e,n,t))},info:(e,n,t)=>{a(s("info",e,n,t))},warn:(e,n,t)=>{a(s("warn",e,n,t))},error:(e,n,t)=>{const o=t instanceof Error?t:void 0,i=t instanceof Error?void 0:t;a(s("error",e,n,i,o))},critical:(e,n,t)=>{const o=t instanceof Error?t:void 0,i=t instanceof Error?void 0:t;a(s("critical",e,n,i,o))},getLogs:()=>f(r).entries,subscribe:r.subscribe,clear:()=>{r.set({entries:[],maxEntries:c}),typeof window<"u"&&localStorage.removeItem(l)},export:()=>{const e=f(r).entries,n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(n),o=document.createElement("a");o.href=t,o.download=`chessnet-logs-${new Date().toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(t)}};typeof window<"u"&&(window.addEventListener("error",e=>{d.critical(`Uncaught error: ${e.message}`,"GlobalErrorHandler",e.error)}),window.addEventListener("unhandledrejection",e=>{d.critical(`Unhandled promise rejection: ${e.reason}`,"GlobalErrorHandler",e.reason)}));d.info("ChessNet application initialized","App");export{d as l};
