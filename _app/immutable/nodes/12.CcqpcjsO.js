import{l as Rt,e as Jt,g as st,a as u,d as qt,b as ft,f,s as Qt,c as x}from"../chunks/DfPprva0.js";import{I as Xt,a as Zt,i as Kt,e as pe,f as Wt,d as xe,r as mt,t as Yt,b as ue,c as gt,s as ea}from"../chunks/SDohX1Oa.js";import{o as ta}from"../chunks/CYLyCtPQ.js";import{f as Ae,p as aa,m as M,b as p,l as J,h as sa,t as O,c as a,s as r,g as e,a as ra,i as we,n as C,r as t,k as oa,u as l,j as ye,v as ht,Z as la}from"../chunks/B4zm7d7r.js";import{i as N}from"../chunks/CPpFl6Wl.js";import{b as tt}from"../chunks/BMuFCVKE.js";import{a as wt,s as ia}from"../chunks/l-0K12sd.js";import{e as na,a as da}from"../chunks/CaXS0ZTw.js";import{b as va}from"../chunks/D2R-gXPi.js";import{b as ca}from"../chunks/CLQpBtLO.js";import{p as pa}from"../chunks/DojiiGNW.js";import{C as yt}from"../chunks/BdW66KU-.js";import{U as at}from"../chunks/CxlzOQ1b.js";import{C as kt}from"../chunks/BilkHblz.js";import{C as Dt}from"../chunks/CpqjGrWN.js";import{C as St}from"../chunks/CXsNeB2N.js";import{D as xa}from"../chunks/DvXvGZtu.js";import{C as ua}from"../chunks/Bnh8sue4.js";import{F as _a}from"../chunks/BEii0wlV.js";import{B as ba}from"../chunks/CFq-KlVN.js";import{X as fa}from"../chunks/cFysVmE1.js";import{S as ma}from"../chunks/CyaytXpw.js";import{S as ga}from"../chunks/R3Ehc2-O.js";function ha(Le,je){const Fe=Rt(je,["children","$$slots","$$events","$$legacy"]);const ze=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M8 13h2"}],["path",{d:"M14 13h2"}],["path",{d:"M8 17h2"}],["path",{d:"M14 17h2"}]];Xt(Le,Jt({name:"file-spreadsheet"},()=>Fe,{get iconNode(){return ze},children:(Ie,rt)=>{var re=st(),Ee=Ae(re);Zt(Ee,je,"default",{}),u(Ie,re)},$$slots:{default:!0}}))}var wa=f("<option> </option>"),ya=f('<span class="bg-yellow-500/10 text-yellow-400 px-2 py-1 rounded border border-yellow-500/20"> </span>'),ka=f('<div class="w-full"><div class="text-slate-400 text-sm mb-2"><span class="font-bold text-white"> </span> alumnos en lista</div> <div class="flex gap-2 text-xs"><span class="bg-emerald-500/10 text-emerald-400 px-2 py-1 rounded border border-emerald-500/20"> </span> <span class="bg-red-500/10 text-red-400 px-2 py-1 rounded border border-red-500/20"> </span> <!></div></div>'),Da=f('<div class="flex gap-2 pt-4 border-t border-slate-700"><button class="flex-1 bg-emerald-600/10 hover:bg-emerald-600/20 text-emerald-400 border border-emerald-600/30 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2"><!> Marcar Todos Presentes</button> <button class="flex-1 bg-red-600/10 hover:bg-red-600/20 text-red-400 border border-red-600/30 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2"><!> Marcar Todos Ausentes</button></div>'),Sa=f('<div class="p-12 text-center text-slate-500"><p>Este grupo no tiene alumnos asignados todavía.</p> <a class="text-pink-400 hover:underline mt-2 inline-block">Gestionar Clases</a></div>'),$a=f('<div class="p-4 flex items-center justify-between hover:bg-slate-800/50 transition-colors"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold"> </div> <div><p class="text-white font-medium"> </p> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex bg-slate-900 rounded-lg p-1 gap-1"><button><!> <span class="hidden sm:inline">Presente</span></button> <button><!> <span class="hidden sm:inline">Justificado</span></button> <button><!> <span class="hidden sm:inline">Ausente</span></button></div></div>'),Ca=f('<span class="inline-flex items-center gap-1.5 bg-purple-500/20 text-purple-300 px-3 py-1 rounded-full text-sm border border-purple-500/30"> <button class="hover:text-white"><!></button></span>'),Aa=f('<div class="p-3 text-slate-500 text-sm">No se encontraron habilidades.</div>'),ja=f('<button class="w-full text-left px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 hover:text-white flex justify-between group"><span> </span> <span class="text-xs text-slate-500 group-hover:text-slate-400"> </span></button>'),Ia=f('<div class="absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-48 overflow-y-auto"><!></div>'),Ea=f('<span class="text-emerald-400 font-medium"> </span>'),Ma=f('<span class="text-amber-400 font-medium flex items-center gap-2"><span class="w-2 h-2 bg-amber-400 rounded-full animate-pulse"></span> Cambios sin guardar</span>'),Ta=f('<span class="text-slate-500 font-medium">Todo guardado</span>'),Pa=f('<div class="divide-y divide-slate-700"></div> <div class="p-4 bg-slate-900/30 border-t border-slate-700"><label for="session-notes" class="block text-sm font-medium text-slate-400 mb-2 flex items-center gap-2"><!> Observaciones de la Sesión (Opcional)</label> <textarea id="session-notes" placeholder="Ej: Clase muy participativa, repasamos aperturas..." rows="2" class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white text-sm focus:outline-none focus:border-pink-500 resize-none"></textarea></div> <div class="p-4 bg-slate-900/30 border-t border-slate-700"><label class="block text-sm font-medium text-slate-400 mb-2 flex items-center gap-2"><!> Planificación: ¿Qué habilidades enseñaste hoy?</label> <div class="flex flex-wrap gap-2 mb-3"></div> <div class="relative"><!> <input type="text" placeholder="Buscar habilidades para añadir..." class="w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white text-sm focus:outline-none focus:border-purple-500"/> <!></div></div> <div class="p-6 bg-slate-900/50 border-t border-slate-700 flex justify-between items-center"><div class="flex items-center gap-3"><!></div> <button class="bg-pink-600 hover:bg-pink-500 text-white px-6 py-2.5 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg hover:shadow-pink-500/20 active:scale-95 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-pink-600"><!> Guardar Asistencia</button></div>',1),Oa=f('<div class="bg-[#1e293b] border border-slate-700 rounded-2xl overflow-hidden"><!></div>'),Na=f('<div class="text-center py-20 border-2 border-dashed border-slate-800 rounded-3xl text-slate-500"><!> <p class="text-lg">Selecciona un grupo arriba para empezar a pasar lista.</p></div>'),La=f('<p class="text-slate-500 text-sm text-center py-8">No hay datos de asistencia registrados aún.</p>'),Fa=f('<span class="text-xs text-red-400 font-medium">⚠ Baja asistencia</span>'),za=f('<span class="text-yellow-400"> </span>'),Ua=f('<div class="bg-slate-900/50 p-4 rounded-lg border border-slate-700/50 hover:border-slate-600 transition-colors"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold text-sm"> </div> <div><p class="text-white font-medium"> </p> <p class="text-xs text-slate-500"> </p></div></div> <div class="text-right"><div> </div> <!></div></div> <div class="w-full bg-slate-800 rounded-full h-2 overflow-hidden"><div></div></div> <div class="flex gap-4 mt-3 text-xs"><span class="text-emerald-400"> </span> <span class="text-red-400"> </span> <!></div></div>'),Ba=f('<div class="space-y-3 max-h-96 overflow-y-auto custom-scrollbar"></div>'),Va=f('<div class="absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1.5 px-3 rounded-lg border border-slate-700 shadow-xl opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10 pointer-events-none"><div class="font-bold text-pink-400"> </div> <div class="text-[10px] text-slate-400">asistencia</div></div>'),Ga=f('<div class="absolute top-2 left-1/2 -translate-x-1/2 text-white text-xs font-bold"> </div>'),Ha=f('<div class="flex-1 flex flex-col items-center group relative"><div><!> <!></div> <p class="text-[10px] text-slate-400 mt-2 font-medium uppercase"> </p> <p class="text-[9px] text-slate-600"> </p></div>'),Ra=f('<span class="text-yellow-400"> </span>'),Ja=f('<div class="p-4 hover:bg-slate-800/30 transition-colors"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><div class="text-center"><div class="text-2xl font-bold text-white"> </div> <div class="text-xs text-slate-500 uppercase"> </div></div> <div class="flex-1"><div class="text-sm text-slate-300 mb-1"> </div> <div class="flex gap-3 text-xs"><span class="text-emerald-400"> </span> <span class="text-red-400"> </span> <!></div></div></div> <div class="text-right"><div> </div> <div class="text-xs text-slate-500"> </div></div></div></div>'),qa=f('<div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-2 bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2"><!> Estadísticas por Alumno</h3> <!></div> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2"><!> Tendencia Semanal</h3> <div class="h-56 flex items-end justify-between gap-2 mb-4 px-2"></div> <div class="text-xs text-slate-500 text-center pt-2 border-t border-slate-700">Últimos 7 días • Pasa el ratón para ver detalles</div></div></div> <div class="mt-6 bg-[#1e293b] border border-slate-700 rounded-2xl overflow-hidden"><div class="p-4 bg-slate-900/50 border-b border-slate-700 flex justify-between items-center flex-wrap gap-3"><div class="flex items-center gap-3"><h3 class="font-bold text-white flex items-center gap-2"><!> Historial de Sesiones</h3> <span class="text-xs text-slate-500">Últimas 10 sesiones</span></div> <div class="flex gap-2"><button class="flex items-center gap-2 px-3 py-1.5 bg-red-600/10 hover:bg-red-600/20 text-red-400 border border-red-600/30 rounded-lg text-xs font-medium transition-colors"><!> <span class="hidden sm:inline">Exportar PDF</span></button> <button class="flex items-center gap-2 px-3 py-1.5 bg-emerald-600/10 hover:bg-emerald-600/20 text-emerald-400 border border-emerald-600/30 rounded-lg text-xs font-medium transition-colors"><!> <span class="hidden sm:inline">Exportar CSV</span></button></div></div> <div class="divide-y divide-slate-700"></div></div>',1),Qa=f('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="mb-8"><h1 class="text-3xl font-bold text-white flex items-center gap-3"><!> Control de Asistencia</h1> <p class="mt-2 text-slate-400">Registra la asistencia diaria de tus grupos.</p></div> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6 mb-8"><div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"><div><label for="class-select" class="block text-sm font-medium text-slate-400 mb-2">Seleccionar Grupo</label> <div class="relative"><!> <select id="class-select" class="w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:border-pink-500 appearance-none"><option>-- Elegir Clase --</option><!></select></div></div> <div><label for="date-select" class="block text-sm font-medium text-slate-400 mb-2">Fecha</label> <div class="flex gap-2"><button class="bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 px-3 py-2 rounded-lg transition-colors" title="Día anterior">←</button> <div class="relative flex-1"><!> <input id="date-select" type="date" class="w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:border-pink-500"/></div> <button class="bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 px-3 py-2 rounded-lg transition-colors" title="Día siguiente">→</button></div></div> <div class="flex items-end"><!></div></div> <!></div> <!> <!></div>');function ms(Le,je){aa(je,!1);const Fe=()=>ft(wt,"$appStore",Ie),ze=()=>ft(pa,"$page",Ie),[Ie,rt]=Qt(),re=M(),Ee=M(),ee=M(),T=M(),ot=M(),lt=M(),Ue=M(),te=M(),Me=M(),it=M();let A=M(Fe());wt.subscribe(s=>p(A,s));let m=M(""),q=M(new Date().toISOString().split("T")[0]),c=M({}),Te=M(""),oe=M(!1),ke=M(""),V=M([]),_e=M("");ta(()=>{const s=ze().url.searchParams.get("classId");s&&p(m,s)});function $t(){const s=e(A).attendance.find(o=>o.classId===e(m)&&o.date===e(q));s?(p(c,{}),s.records.forEach(o=>{we(c,e(c)[o.studentId]=o.status)}),p(ke,s.sessionNotes||""),p(V,s.skills||[])):(p(c,{}),e(T).forEach(o=>{we(c,e(c)[o.id]="present")}),p(ke,""),p(V,[])),{...e(c)},p(oe,!1)}function Be(s,o){we(c,e(c)[s]=o),be()}function be(){p(oe,!0)}function Ct(){e(T).forEach(s=>{we(c,e(c)[s.id]="present")}),be()}function At(){confirm("¿Estás seguro de marcar a todos como ausentes?")&&(e(T).forEach(s=>{we(c,e(c)[s.id]="absent")}),be())}function jt(){if(e(oe)&&!confirm("Tienes cambios sin guardar. ¿Continuar sin guardar?"))return;const s=new Date(e(q));s.setDate(s.getDate()-1),p(q,s.toISOString().split("T")[0])}function It(){if(e(oe)&&!confirm("Tienes cambios sin guardar. ¿Continuar sin guardar?"))return;const s=new Date(e(q));s.setDate(s.getDate()+1),p(q,s.toISOString().split("T")[0])}function Et(){if(!e(m))return;const s={id:crypto.randomUUID(),classId:e(m),date:e(q),records:Object.entries(e(c)).map(([o,v])=>({studentId:o,status:v})),sessionNotes:e(ke).trim()||void 0,skills:e(V).length>0?e(V):void 0};ia.saveAttendance(s),p(Te,"Asistencia guardada correctamente"),p(oe,!1),{...e(c)},setTimeout(()=>p(Te,""),3e3)}function Mt(){if(!e(ee)||e(te).length===0){alert("No hay datos de asistencia para exportar");return}na(e(ee).name,e(te))}function Tt(){if(!e(ee)||e(te).length===0){alert("No hay datos de asistencia para exportar");return}da(e(ee).name,e(te),e(T))}J(()=>(e(A),e(V),e(_e)),()=>{p(re,e(A).skills.filter(s=>!e(V).includes(s.id)&&s.name.toLowerCase().includes(e(_e).toLowerCase())))}),J(()=>(e(A),e(V)),()=>{p(Ee,e(A).skills.filter(s=>e(V).includes(s.id)))}),J(()=>(e(A),e(m)),()=>{p(ee,e(A).classes.find(s=>s.id===e(m)))}),J(()=>(e(ee),e(A)),()=>{p(T,e(ee)?e(A).students.filter(s=>e(ee)?.students.includes(s.id)):[])}),J(()=>(e(m),e(q)),()=>{e(m)&&e(q)&&$t()}),J(()=>(e(T),e(c)),()=>{e(T).length>0&&Object.keys(e(c)).length===0&&e(T).forEach(s=>{e(c)[s.id]||we(c,e(c)[s.id]="present")})}),J(()=>e(c),()=>{p(ot,Object.values(e(c)).filter(s=>s==="present").length)}),J(()=>e(c),()=>{p(lt,Object.values(e(c)).filter(s=>s==="absent").length)}),J(()=>e(c),()=>{p(Ue,Object.values(e(c)).filter(s=>s==="excused").length)}),J(()=>(e(m),e(A)),()=>{p(te,e(m)?e(A).attendance.filter(s=>s.classId===e(m)).sort((s,o)=>o.date.localeCompare(s.date)).slice(0,10):[])}),J(()=>(e(m),e(T),e(A)),()=>{p(Me,e(m)&&e(T).length>0?e(T).map(s=>{const o=e(A).attendance.filter(k=>k.classId===e(m)).flatMap(k=>k.records.filter(z=>z.studentId===s.id)),v=o.length,j=o.filter(k=>k.status==="present").length,S=o.filter(k=>k.status==="absent").length,I=o.filter(k=>k.status==="excused").length,y=v>0?Math.round(j/v*100):100;return{student:s,total:v,present:j,absent:S,excused:I,rate:y,isLowAttendance:y<70&&v>=3}}).sort((s,o)=>s.rate-o.rate):[])}),J(()=>(e(m),e(A)),()=>{p(it,e(m)?(()=>{const s=[],o=new Date;for(let v=6;v>=0;v--){const j=new Date(o);j.setDate(j.getDate()-v);const S=j.toISOString().split("T")[0],I=e(A).attendance.find(y=>y.classId===e(m)&&y.date===S);if(I){const y=I.records.length,k=I.records.filter(Q=>Q.status==="present").length,z=y>0?Math.round(k/y*100):0;s.push({date:S,rate:z,hasData:!0})}else s.push({date:S,rate:0,hasData:!1})}return s})():[])}),sa(),Kt();var Ve=Qa(),Ge=a(Ve),nt=a(Ge),Pt=a(nt);yt(Pt,{class:"w-8 h-8 text-pink-500"}),C(),t(nt),C(2),t(Ge);var He=r(Ge,2),Re=a(He),Je=a(Re),dt=r(a(Je),2),vt=a(dt);at(vt,{class:"absolute left-3 top-2.5 w-4 h-4 text-slate-500"});var qe=r(vt,2);O(()=>{e(m),oa(()=>{e(A)})});var Qe=a(qe);Qe.value=Qe.__value="";var Ot=r(Qe);pe(Ot,1,()=>(e(A),l(()=>e(A).classes)),xe,(s,o)=>{var v=wa(),j=a(v,!0);t(v);var S={};O(()=>{x(j,(e(o),l(()=>e(o).name))),S!==(S=(e(o),l(()=>e(o).id)))&&(v.value=(v.__value=(e(o),l(()=>e(o).id)))??"")}),u(s,v)}),t(qe),t(dt),t(Je);var Xe=r(Je,2),ct=r(a(Xe),2),pt=a(ct);pt.__click=jt;var Ze=r(pt,2),xt=a(Ze);kt(xt,{class:"absolute left-3 top-2.5 w-4 h-4 text-slate-500"});var ut=r(xt,2);mt(ut),t(Ze);var Nt=r(Ze,2);Nt.__click=It,t(ct),t(Xe);var _t=r(Xe,2),Lt=a(_t);{var Ft=s=>{var o=ka(),v=a(o),j=a(v),S=a(j,!0);t(j),C(),t(v);var I=r(v,2),y=a(I),k=a(y);t(y);var z=r(y,2),Q=a(z);t(z);var le=r(z,2);{var ie=X=>{var Z=ya(),ne=a(Z);t(Z),O(()=>x(ne,`⚠ ${e(Ue)??""} Justif.`)),u(X,Z)};N(le,X=>{e(Ue)>0&&X(ie)})}t(I),t(o),O(()=>{x(S,(e(T),l(()=>e(T).length))),x(k,`✓ ${e(ot)??""} Presentes`),x(Q,`✗ ${e(lt)??""} Ausentes`)}),u(s,o)};N(Lt,s=>{e(m)&&s(Ft)})}t(_t),t(Re);var zt=r(Re,2);{var Ut=s=>{var o=Da(),v=a(o);v.__click=Ct;var j=a(v);Dt(j,{class:"w-4 h-4"}),C(),t(v);var S=r(v,2);S.__click=At;var I=a(S);St(I,{class:"w-4 h-4"}),C(),t(S),t(o),u(s,o)};N(zt,s=>{e(m),e(T),l(()=>e(m)&&e(T).length>0)&&s(Ut)})}t(He);var bt=r(He,2);{var Bt=s=>{var o=Oa(),v=a(o);{var j=I=>{var y=Sa(),k=r(a(y),2);t(y),O(()=>ea(k,"href",`${ca??""}/panel/clases`)),u(I,y)},S=I=>{var y=Pa(),k=Ae(y);pe(k,5,()=>e(T),xe,(_,n)=>{var g=$a(),$=a(g),P=a($),b=a(P,!0);t(P);var h=r(P,2),F=a(h),K=a(F,!0);t(F);var w=r(F,2),D=a(w,!0);t(w),t(h),t($);var E=r($,2),L=a(E);L.__click=()=>Be(e(n).id,"present");var ae=a(L);Dt(ae,{class:"w-4 h-4"}),C(2),t(L);var H=r(L,2);H.__click=()=>Be(e(n).id,"excused");var W=a(H);ua(W,{class:"w-4 h-4"}),C(2),t(H);var Y=r(H,2);Y.__click=()=>Be(e(n).id,"absent");var se=a(Y);St(se,{class:"w-4 h-4"}),C(2),t(Y),t(E),t(g),O(ve=>{x(b,ve),x(K,(e(n),l(()=>e(n).name))),x(D,(e(n),l(()=>e(n).level))),ue(L,1,`px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 cursor-pointer ${e(c),e(n),l(()=>e(c)[e(n).id]==="present"?"bg-emerald-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800")??""}`),ue(H,1,`px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 cursor-pointer ${e(c),e(n),l(()=>e(c)[e(n).id]==="excused"?"bg-yellow-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800")??""}`),ue(Y,1,`px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 cursor-pointer ${e(c),e(n),l(()=>e(c)[e(n).id]==="absent"?"bg-red-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800")??""}`)},[()=>(e(n),l(()=>e(n).name.charAt(0)))]),u(_,g)}),t(k);var z=r(k,2),Q=a(z),le=a(Q);_a(le,{class:"w-4 h-4"}),C(),t(Q);var ie=r(Q,2);la(ie),ie.__input=()=>be(),t(z);var X=r(z,2),Z=a(X),ne=a(Z);ba(ne,{class:"w-4 h-4 text-purple-400"}),C(),t(Z);var de=r(Z,2);pe(de,5,()=>e(Ee),xe,(_,n)=>{var g=Ca(),$=a(g),P=r($);P.__click=()=>{p(V,e(V).filter(h=>h!==e(n).id)),be()};var b=a(P);fa(b,{class:"w-3 h-3"}),t(P),t(g),O(()=>x($,`${e(n),l(()=>e(n).name)??""} `)),u(_,g)}),t(de);var De=r(de,2),Pe=a(De);ma(Pe,{class:"absolute left-3 top-2.5 w-4 h-4 text-slate-500"});var fe=r(Pe,2);mt(fe);var me=r(fe,2);{var Ke=_=>{var n=Ia(),g=a(n);{var $=b=>{var h=Aa();u(b,h)},P=b=>{var h=st(),F=Ae(h);pe(F,1,()=>e(re),xe,(K,w)=>{var D=ja();D.__click=()=>{p(V,[...e(V),e(w).id]),p(_e,""),be()};var E=a(D),L=a(E,!0);t(E);var ae=r(E,2),H=a(ae,!0);t(ae),t(D),O(()=>{x(L,(e(w),l(()=>e(w).name))),x(H,(e(w),l(()=>e(w).category)))}),u(K,D)}),u(b,h)};N(g,b=>{e(re),l(()=>e(re).length===0)?b($):b(P,!1)})}t(n),u(_,n)};N(me,_=>{e(_e)&&_(Ke)})}t(De),t(X);var ge=r(X,2),Se=a(ge),Oe=a(Se);{var G=_=>{var n=Ea(),g=a(n,!0);t(n),O(()=>x(g,e(Te))),u(_,n)},i=_=>{var n=st(),g=Ae(n);{var $=b=>{var h=Ma();u(b,h)},P=b=>{var h=Ta();u(b,h)};N(g,b=>{e(oe)?b($):b(P,!1)},!0)}u(_,n)};N(Oe,_=>{e(Te)?_(G):_(i,!1)})}t(Se);var U=r(Se,2);U.__click=Et;var d=a(U);ga(d,{class:"w-5 h-5"}),C(),t(U),t(ge),O(()=>U.disabled=!e(oe)),tt(ie,()=>e(ke),_=>p(ke,_)),tt(fe,()=>e(_e),_=>p(_e,_)),u(I,y)};N(v,I=>{e(T),l(()=>e(T).length===0)?I(j):I(S,!1)})}t(o),Yt(3,o,()=>va),u(s,o)},Vt=s=>{var o=Na(),v=a(o);at(v,{class:"w-16 h-16 mx-auto mb-4 opacity-50"}),C(2),t(o),u(s,o)};N(bt,s=>{e(m)?s(Bt):s(Vt,!1)})}var Gt=r(bt,2);{var Ht=s=>{var o=qa(),v=Ae(o),j=a(v),S=a(j),I=a(S);at(I,{class:"w-5 h-5 text-pink-500"}),C(),t(S);var y=r(S,2);{var k=G=>{var i=La();u(G,i)},z=G=>{var i=Ba();pe(i,5,()=>e(Me),xe,(U,d)=>{var _=Ua(),n=a(_),g=a(n),$=a(g),P=a($,!0);t($);var b=r($,2),h=a(b),F=a(h,!0);t(h);var K=r(h,2),w=a(K);t(K),t(b),t(g);var D=r(g,2),E=a(D),L=a(E);t(E);var ae=r(E,2);{var H=R=>{var ce=Fa();u(R,ce)};N(ae,R=>{e(d),l(()=>e(d).isLowAttendance)&&R(H)})}t(D),t(n);var W=r(n,2),Y=a(W);t(W);var se=r(W,2),ve=a(se),We=a(ve);t(ve);var $e=r(ve,2),Ne=a($e);t($e);var he=r($e,2);{var Ye=R=>{var ce=za(),B=a(ce);t(ce),O(()=>x(B,`⚠ ${e(d),l(()=>e(d).excused)??""} justif.`)),u(R,ce)};N(he,R=>{e(d),l(()=>e(d).excused>0)&&R(Ye)})}t(se),t(_),O(R=>{x(P,R),x(F,(e(d),l(()=>e(d).student.name))),x(w,`${e(d),l(()=>e(d).total)??""} sesiones registradas`),ue(E,1,`text-2xl font-bold ${e(d),l(()=>e(d).isLowAttendance?"text-red-400":e(d).rate>=90?"text-emerald-400":"text-slate-300")??""}`),x(L,`${e(d),l(()=>e(d).rate)??""}%`),ue(Y,1,`h-2 rounded-full transition-all duration-500 ${e(d),l(()=>e(d).isLowAttendance?"bg-red-500":e(d).rate>=90?"bg-emerald-500":"bg-blue-500")??""}`),gt(Y,`width: ${e(d),l(()=>e(d).rate)??""}%`),x(We,`✓ ${e(d),l(()=>e(d).present)??""} presentes`),x(Ne,`✗ ${e(d),l(()=>e(d).absent)??""} ausentes`)},[()=>(e(d),l(()=>e(d).student.name.charAt(0)))]),u(U,_)}),t(i),u(G,i)};N(y,G=>{e(Me),l(()=>e(Me).length===0)?G(k):G(z,!1)})}t(j);var Q=r(j,2),le=a(Q),ie=a(le);kt(ie,{class:"w-5 h-5 text-blue-500"}),C(),t(le);var X=r(le,2);pe(X,5,()=>e(it),xe,(G,i)=>{const U=ye(()=>(e(i),l(()=>e(i).hasData?Math.max(e(i).rate,8):4)));var d=Ha(),_=a(d),n=a(_);{var g=w=>{var D=Va(),E=a(D),L=a(E);t(E),C(2),t(D),O(()=>x(L,`${e(i),l(()=>e(i).rate)??""}%`)),u(w,D)};N(n,w=>{e(i),l(()=>e(i).hasData)&&w(g)})}var $=r(n,2);{var P=w=>{var D=Ga(),E=a(D);t(D),O(()=>x(E,`${e(i),l(()=>e(i).rate)??""}%`)),u(w,D)};N($,w=>{e(i),l(()=>e(i).hasData&&e(i).rate>=30)&&w(P)})}t(_);var b=r(_,2),h=a(b,!0);t(b);var F=r(b,2),K=a(F,!0);t(F),t(d),O((w,D)=>{ue(_,1,`w-full rounded-t-lg transition-all duration-300 relative ${e(i),l(()=>e(i).hasData?"bg-gradient-to-t from-pink-500/40 to-pink-500/20 border-t-4 border-pink-500 hover:from-pink-500/60 hover:to-pink-500/30 cursor-pointer":"bg-slate-800/30 border-t-2 border-slate-700")??""}`),gt(_,`height: ${e(U)??""}%`),x(h,w),x(K,D)},[()=>(e(i),l(()=>new Date(e(i).date).toLocaleDateString("es-ES",{weekday:"short"}))),()=>(e(i),l(()=>new Date(e(i).date).getDate()))]),u(G,d)}),t(X),C(2),t(Q),t(v);var Z=r(v,2),ne=a(Z),de=a(ne),De=a(de),Pe=a(De);yt(Pe,{class:"w-5 h-5 text-cyan-500"}),C(),t(De),C(2),t(de);var fe=r(de,2),me=a(fe);me.__click=Mt;var Ke=a(me);xa(Ke,{class:"w-4 h-4"}),C(2),t(me);var ge=r(me,2);ge.__click=Tt;var Se=a(ge);ha(Se,{class:"w-4 h-4"}),C(2),t(ge),t(fe),t(ne);var Oe=r(ne,2);pe(Oe,5,()=>e(te),xe,(G,i)=>{const U=ye(()=>(e(i),l(()=>e(i).records.length))),d=ye(()=>(e(i),l(()=>e(i).records.filter(B=>B.status==="present").length))),_=ye(()=>(e(i),l(()=>e(i).records.filter(B=>B.status==="absent").length))),n=ye(()=>(e(i),l(()=>e(i).records.filter(B=>B.status==="excused").length))),g=ye(()=>(ht(e(U)),ht(e(d)),l(()=>e(U)>0?Math.round(e(d)/e(U)*100):0)));var $=Ja(),P=a($),b=a(P),h=a(b),F=a(h),K=a(F,!0);t(F);var w=r(F,2),D=a(w,!0);t(w),t(h);var E=r(h,2),L=a(E),ae=a(L,!0);t(L);var H=r(L,2),W=a(H),Y=a(W);t(W);var se=r(W,2),ve=a(se);t(se);var We=r(se,2);{var $e=B=>{var Ce=Ra(),et=a(Ce);t(Ce),O(()=>x(et,`⚠ ${e(n)??""}`)),u(B,Ce)};N(We,B=>{e(n)>0&&B($e)})}t(H),t(E),t(b);var Ne=r(b,2),he=a(Ne),Ye=a(he);t(he);var R=r(he,2),ce=a(R);t(R),t(Ne),t(P),t($),O((B,Ce,et)=>{x(K,B),x(D,Ce),x(ae,et),x(Y,`✓ ${e(d)??""}`),x(ve,`✗ ${e(_)??""}`),ue(he,1,`text-xl font-bold ${e(g)>=90?"text-emerald-400":e(g)>=70?"text-blue-400":"text-red-400"}`),x(Ye,`${e(g)??""}%`),x(ce,`${e(U)??""} alumnos`)},[()=>(e(i),l(()=>new Date(e(i).date).getDate())),()=>(e(i),l(()=>new Date(e(i).date).toLocaleDateString("es-ES",{month:"short"}))),()=>(e(i),l(()=>new Date(e(i).date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))]),u(G,$)}),t(Oe),t(Z),u(s,o)};N(Gt,s=>{e(m),e(te),l(()=>e(m)&&e(te).length>0)&&s(Ht)})}t(Ve),Wt(qe,()=>e(m),s=>p(m,s)),tt(ut,()=>e(q),s=>p(q,s)),u(Le,Ve),ra(),rt()}qt(["click","input"]);export{ms as component};
