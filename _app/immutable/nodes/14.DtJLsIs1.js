import{l as jt,e as Nt,g as Pt,a as v,d as Et,b as et,f as m,s as Tt,c as u}from"../chunks/DfPprva0.js";import{I as Dt,a as Ot,i as zt,s as ve,b as Pe,t as q,r as Ee,e as ce,d as Bt,f as tt}from"../chunks/SDohX1Oa.js";import{f as se,p as Lt,l as Q,h as Ut,a as Vt,g as e,m as C,s,b as r,i as pe,c as a,r as t,t as S,n as ae,u as i,k as at}from"../chunks/B4zm7d7r.js";import{i as G}from"../chunks/CPpFl6Wl.js";import{b as Te}from"../chunks/BMuFCVKE.js";import{p as Ht}from"../chunks/DojiiGNW.js";import{a as st,s as De}from"../chunks/l-0K12sd.js";import{M as Rt,E as rt}from"../chunks/CkP46cHH.js";import{a as Oe,f as ze}from"../chunks/D2R-gXPi.js";import{b as ue}from"../chunks/CLQpBtLO.js";import{n as lt}from"../chunks/C0n51YRF.js";import{C as Ft}from"../chunks/DZBQXXAS.js";import{A as Gt}from"../chunks/QyzqHlA1.js";import{U as ot}from"../chunks/CxlzOQ1b.js";import{B as it}from"../chunks/B4FdaYO9.js";import{M as Jt}from"../chunks/p-JvZcHE.js";import{P as nt}from"../chunks/MjU8_qJM.js";import{U as Kt}from"../chunks/B8Kjdszw.js";import{T as Be}from"../chunks/BALLaoa6.js";function Yt(me,re){const le=jt(re,["children","$$slots","$$events","$$legacy"]);const _e=[["path",{d:"M10 12h4"}],["path",{d:"M10 8h4"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16"}]];Dt(me,Nt({name:"building-2"},()=>le,{get iconNode(){return _e},children:(oe,Le)=>{var j=Pt(),_=se(j);Ot(_,re,"default",{}),v(oe,j)},$$slots:{default:!0}}))}const qt=!1,Qt=!1,Ea=Object.freeze(Object.defineProperty({__proto__:null,prerender:qt,ssr:Qt},Symbol.toStringTag,{value:"Module"}));var Wt=m('<div class="text-center text-slate-500 mt-20"><h2 class="text-2xl font-bold text-white mb-4">Centro no encontrado</h2> <a class="text-purple-400 hover:underline">Volver a la lista</a></div>'),Xt=m('<div class="flex items-center gap-2"><!> </div>'),Zt=m('<div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-slate-800/50 p-6 rounded-2xl border border-slate-700"><h3 class="text-slate-400 text-sm font-bold uppercase mb-2">Ocupación Media</h3> <p class="text-3xl font-bold text-white"> </p> <p class="text-xs text-slate-500 mt-1">Alumnos por clase</p></div> <div class="bg-slate-800/50 p-6 rounded-2xl border border-slate-700 flex flex-col gap-3 justify-center"><button class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center justify-center gap-2"><!> Nueva Clase</button></div></div>'),ea=m("<option> </option>"),ta=m('<div class="space-y-4"><div><label for="c-name" class="block text-sm font-medium text-slate-400 mb-1">Nombre</label> <input id="c-name" type="text" placeholder="Ej: Avanzado Martes" class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white"/></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div><label for="c-day" class="block text-sm font-medium text-slate-400 mb-1">Día de la Semana</label> <select id="c-day" class="form-select"></select></div> <div><label for="c-time" class="block text-sm font-medium text-slate-400 mb-1">Hora de Inicio</label> <input id="c-time" type="time" class="form-input"/></div> <div><label for="c-duration" class="block text-sm font-medium text-slate-400 mb-1">Duración (min)</label> <input id="c-duration" type="number" min="30" step="15" class="form-input"/></div></div> <p class="text-xs text-slate-500">Se mostrará en el calendario como: <span class="text-purple-400"> </span></p> <div><label for="c-level" class="block text-sm font-medium text-slate-400 mb-1">Nivel</label> <select id="c-level" class="form-select"><option>Peón (Iniciación)</option><option>Alfil (Intermedio)</option><option>Rey (Avanzado)</option></select></div></div>'),aa=m('<button class="px-4 py-2 bg-slate-800 text-slate-300 rounded-lg hover:bg-slate-700 transition-colors">Cancelar</button> <button class="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors">Crear Clase</button>',1),sa=m('<div class="col-span-full"><!></div>'),ra=m('<div class="bg-[#1e293b] border border-slate-700/50 p-4 rounded-xl flex flex-col sm:flex-row sm:items-center justify-between gap-4 hover:border-purple-500/30 transition-colors"><div><h4 class="text-lg font-bold text-white"> </h4> <p class="text-sm text-slate-400"> </p></div> <div class="flex items-center gap-3"><a class="text-sm text-purple-400 hover:text-purple-300 font-medium">Gestionar</a> <button class="text-slate-500 hover:text-red-400 p-2 transition-colors" title="Eliminar Clase"><!></button></div></div>'),la=m('<div class="grid gap-4"></div>'),oa=m('<div><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-bold text-white"> </h2> <button class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-medium flex items-center gap-2 transition-colors"><!> Nueva Clase</button></div> <!> <!></div>'),ia=m('<div class="p-8"><!></div>'),na=m('<div class="bg-slate-900/50 border border-slate-700 rounded-xl p-4"><div class="flex justify-between items-start mb-2"><h4 class="text-white font-bold text-lg"> </h4> <button type="button" class="text-slate-500 hover:text-red-400 p-2 -mr-2" title="Baja definitiva"><!></button></div> <div class="text-sm text-slate-400 bg-slate-800/50 p-3 rounded-lg mb-2"><span class="block text-xs uppercase font-bold text-slate-500 mb-1">Clases:</span> </div></div>'),da=m('<tr class="hover:bg-slate-800/30"><td class="p-4 font-medium text-white"> </td><td class="p-4 text-sm text-slate-400"> </td><td class="p-4 text-right"><button class="text-slate-500 hover:text-red-400 p-2 transition-colors" title="Baja definitiva"><!></button></td></tr>'),va=m('<div class="block sm:hidden space-y-4 p-4"></div> <table class="hidden sm:table w-full text-left"><thead class="bg-slate-900/30 text-slate-400 text-xs uppercase"><tr><th class="p-4">Nombre</th><th class="p-4">Clases</th><th class="p-4 text-right">Acciones</th></tr></thead><tbody class="divide-y divide-slate-700"></tbody></table>',1),ca=m('<div class="bg-[#1e293b] border border-slate-700 rounded-2xl overflow-hidden"><div class="p-4 bg-slate-900/50 border-b border-slate-700 flex justify-between items-center"><span class="font-bold text-slate-300"> </span> <a class="text-sm text-emerald-400 hover:underline flex items-center gap-1"><!> Matricular Nuevo</a></div> <!></div>'),pa=m('<div class="mb-8"><a class="inline-flex items-center text-slate-400 hover:text-white mb-4 transition-colors"><!> Volver a Centros</a> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6 sm:p-8 relative overflow-hidden"><div class="absolute top-0 right-0 p-4 sm:p-8 opacity-10"><!></div> <div class="relative z-10"><h1 class="text-4xl font-bold text-white mb-4"> </h1> <div class="flex flex-wrap gap-6 text-slate-300"><!> <div class="flex items-center gap-2"><!> </div> <div class="flex items-center gap-2"><!> </div></div></div></div></div> <div class="flex gap-2 mb-8 border-b border-slate-700 overflow-x-auto pb-1 no-scrollbar"><button>Resumen</button> <button> </button> <button> </button></div>  <!> <!> <!>',1),ua=m('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></div> <!>',1);function Ta(me,re){Lt(re,!1);const le=()=>et(st,"$appStore",oe),_e=()=>et(Ht,"$page",oe),[oe,Le]=Tt(),j=C(),_=C(),be=C(),k=C();let fe=_e().params.id,f=C(),O=C("overview"),L=C(!1),x=C({id:"",name:"",centerId:fe||"",schedule:"",level:"Pawn",students:[],duration:60}),V=C("Lunes"),J=C("17:00");const dt=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"];function vt(){if(!e(x).name||!e(f))return;const l={...e(x),id:crypto.randomUUID(),centerId:e(f).id};De.addClass(l),r(x,{id:"",name:"",centerId:e(f).id,schedule:"",level:"Pawn",students:[],duration:60}),r(V,"Lunes"),r(J,"17:00"),r(L,!1)}let W=C(!1),xe=C(""),he=C(""),ie=null,ge=C("danger");function ct(l){r(xe,"¿Eliminar clase?"),r(he,"Los alumnos no se borrarán, pero serán desasignados de este grupo."),r(ge,"warning"),ie=()=>{st.update(b=>({...b,classes:b.classes.filter(H=>H.id!==l)})),lt.success("Clase eliminada del centro.")},r(W,!0)}function Ue(l){r(xe,"¿Eliminar alumno?"),r(he,"Se eliminará al alumno del sistema completo. Esta acción es irreversible."),r(ge,"danger"),ie=()=>{e(j).classes.forEach(b=>{b.students.includes(l)&&De.removeClassMember(b.id,l)}),De.removeStudent(l),lt.success("Alumno eliminado correctamente.")},r(W,!0)}function pt(){ie&&ie(),r(W,!1)}function Ve(l){return e(_).filter(b=>b.students.includes(l)).map(b=>b.name).join(", ")}Q(()=>le(),()=>{r(j,le())}),Q(()=>e(j),()=>{r(f,e(j).centers.find(l=>l.id===fe))}),Q(()=>e(j),()=>{r(_,e(j).classes.filter(l=>l.centerId===fe))}),Q(()=>e(_),()=>{r(be,new Set(e(_).flatMap(l=>l.students)))}),Q(()=>(e(j),e(be)),()=>{r(k,e(j).students.filter(l=>e(be).has(l.id)))}),Q(()=>(e(V),e(J)),()=>{pe(x,e(x).schedule=`${e(V)} ${e(J)}`)}),Ut(),zt();var He=ua(),we=se(He),ut=a(we);{var mt=l=>{var b=Wt(),H=s(a(b),2);t(b),S(()=>ve(H,"href",`${ue??""}/panel/centros`)),v(l,b)},_t=l=>{var b=pa(),H=se(b),ne=a(H),ft=a(ne);Gt(ft,{class:"w-4 h-4 mr-1"}),ae(),t(ne);var Re=s(ne,2),ye=a(Re),xt=a(ye);Yt(xt,{class:"w-32 h-32 sm:w-48 sm:h-48 text-white"}),t(ye);var Fe=s(ye,2),$e=a(Fe),ht=a($e,!0);t($e);var Ge=s($e,2),Je=a(Ge);{var gt=h=>{var d=Xt(),y=a(d);Jt(y,{class:"w-5 h-5 text-purple-400"});var I=s(y);t(d),S(()=>u(I,` ${e(f),i(()=>e(f).location)??""}`)),v(h,d)};G(Je,h=>{e(f),i(()=>e(f).location)&&h(gt)})}var Ce=s(Je,2),Ke=a(Ce);ot(Ke,{class:"w-5 h-5 text-blue-400"});var wt=s(Ke);t(Ce);var Ye=s(Ce,2),qe=a(Ye);it(qe,{class:"w-5 h-5 text-emerald-400"});var yt=s(qe);t(Ye),t(Ge),t(Fe),t(Re),t(H);var ke=s(H,2),Me=a(ke);Me.__click=()=>r(O,"overview");var X=s(Me,2);X.__click=()=>r(O,"classes");var $t=a(X);t(X);var de=s(X,2);de.__click=()=>r(O,"students");var Ct=a(de);t(de),t(ke);var Qe=s(ke,2);{var kt=h=>{var d=Zt(),y=a(d),I=s(a(y),2),Z=a(I,!0);t(I),ae(2),t(y);var z=s(y,2),R=a(z);R.__click=()=>{r(O,"classes"),r(L,!0)};var K=a(R);nt(K,{class:"w-4 h-4"}),ae(),t(R),t(z),t(d),S(ee=>u(Z,ee),[()=>(e(_),e(k),i(()=>e(_).length>0?Math.round(e(k).length/e(_).length):0))]),q(3,d,()=>Oe),v(h,d)};G(Qe,h=>{e(O)==="overview"&&h(kt)})}var We=s(Qe,2);{var Mt=h=>{var d=oa(),y=a(d),I=a(y),Z=a(I);t(I);var z=s(I,2);z.__click=()=>r(L,!e(L));var R=a(z);nt(R,{class:"w-4 h-4"}),ae(),t(z),t(y);var K=s(y,2);Rt(K,{get title(){return`Crear Clase en ${e(f),i(()=>e(f).name)??""}`},size:"md",get isOpen(){return e(L)},set isOpen(n){r(L,n)},children:(n,g)=>{var w=ta(),c=a(w),$=s(a(c),2);Ee($),t(c);var o=s(c,2),N=a(o),p=s(a(N),2);S(()=>{e(V),at(()=>{})}),ce(p,5,()=>dt,Bt,(D,Ne)=>{var te=ea(),It=a(te,!0);t(te);var Ze={};S(()=>{u(It,e(Ne)),Ze!==(Ze=e(Ne))&&(te.value=(te.__value=e(Ne))??"")}),v(D,te)}),t(p),t(N);var M=s(N,2),P=s(a(M),2);Ee(P),t(M);var B=s(M,2),E=s(a(B),2);Ee(E),t(B),t(o);var T=s(o,2),A=s(a(T)),F=a(A);t(A),t(T);var Y=s(T,2),Se=s(a(Y),2);S(()=>{e(x),at(()=>{})});var Ie=a(Se);Ie.value=Ie.__value="Pawn";var je=s(Ie);je.value=je.__value="Bishop";var Xe=s(je);Xe.value=Xe.__value="King",t(Se),t(Y),t(w),S(()=>u(F,`${e(V)??""} ${e(J)??""}`)),Te($,()=>e(x).name,D=>pe(x,e(x).name=D)),tt(p,()=>e(V),D=>r(V,D)),Te(P,()=>e(J),D=>r(J,D)),Te(E,()=>e(x).duration,D=>pe(x,e(x).duration=D)),tt(Se,()=>e(x).level,D=>pe(x,e(x).level=D)),v(n,w)},$$slots:{default:!0,footer:(n,g)=>{var w=aa(),c=se(w);c.__click=()=>r(L,!1);var $=s(c,2);$.__click=vt,v(n,w)}},$$legacy:!0});var ee=s(K,2);{var Ae=n=>{var g=sa(),w=a(g);rt(w,{get icon(){return it},title:"No hay clases en este centro",description:"Organiza tus alumnos en grupos y horarios.",actionLabel:"Crear Clase",$$events:{action:()=>r(L,!0)}}),t(g),v(n,g)},U=n=>{var g=la();ce(g,7,()=>e(_),w=>w.id,(w,c,$)=>{var o=ra(),N=a(o),p=a(N),M=a(p,!0);t(p);var P=s(p,2),B=a(P);t(P),t(N);var E=s(N,2),T=a(E),A=s(T,2);A.__click=()=>ct(e(c).id);var F=a(A);Be(F,{class:"w-4 h-4"}),t(A),t(E),t(o),S(()=>{u(M,(e(c),i(()=>e(c).name))),u(B,`${e(c),i(()=>e(c).schedule)??""} • ${e(c),i(()=>e(c).students.length)??""} alumnos`),ve(T,"href",`${ue??""}/panel/clases`)}),q(1,o,()=>ze,()=>({y:20,duration:300,delay:e($)*50})),v(w,o)}),t(g),v(n,g)};G(ee,n=>{e(_),i(()=>e(_).length===0)?n(Ae):n(U,!1)})}t(d),S(()=>u(Z,`Clases en ${e(f),i(()=>e(f).name)??""}`)),q(3,d,()=>Oe),v(h,d)};G(We,h=>{e(O)==="classes"&&h(Mt)})}var At=s(We,2);{var St=h=>{var d=ca(),y=a(d),I=a(y),Z=a(I);t(I);var z=s(I,2),R=a(z);Kt(R,{class:"w-4 h-4"}),ae(),t(z),t(y);var K=s(y,2);{var ee=U=>{var n=ia(),g=a(n);rt(g,{get icon(){return ot},title:"No hay alumnos",description:"Ningún alumno está inscrito en clases de este centro todavía. Añádelos desde la sección 'Alumnos' o al editar una clase."}),t(n),v(U,n)},Ae=U=>{var n=va(),g=se(n);ce(g,7,()=>e(k),$=>$.id,($,o,N)=>{var p=na(),M=a(p),P=a(M),B=a(P,!0);t(P);var E=s(P,2);E.__click=()=>Ue(e(o).id);var T=a(E);Be(T,{class:"w-5 h-5"}),t(E),t(M);var A=s(M,2),F=s(a(A));t(A),t(p),S(Y=>{u(B,(e(o),i(()=>e(o).name))),u(F,` ${Y??""}`)},[()=>(e(o),i(()=>Ve(e(o).id)))]),q(1,p,()=>ze,()=>({y:20,duration:300,delay:e(N)*30})),v($,p)}),t(g);var w=s(g,2),c=s(a(w));ce(c,7,()=>e(k),$=>$.id,($,o,N)=>{var p=da(),M=a(p),P=a(M,!0);t(M);var B=s(M),E=a(B,!0);t(B);var T=s(B),A=a(T);A.__click=()=>Ue(e(o).id);var F=a(A);Be(F,{class:"w-4 h-4"}),t(A),t(T),t(p),S(Y=>{u(P,(e(o),i(()=>e(o).name))),u(E,Y)},[()=>(e(o),i(()=>Ve(e(o).id)))]),q(1,p,()=>ze,()=>({y:20,duration:300,delay:e(N)*30})),v($,p)}),t(c),t(w),v(U,n)};G(K,U=>{e(k),i(()=>e(k).length===0)?U(ee):U(Ae,!1)})}t(d),S(()=>{u(Z,`Listado de Alumnos (${e(k),i(()=>e(k).length)??""})`),ve(z,"href",`${ue??""}/panel/alumnos`)}),q(3,d,()=>Oe),v(h,d)};G(At,h=>{e(O)==="students"&&h(St)})}S(()=>{ve(ne,"href",`${ue??""}/panel/centros`),u(ht,(e(f),i(()=>e(f).name))),u(wt,` ${e(k),i(()=>e(k).length)??""} Alumnos`),u(yt,` ${e(_),i(()=>e(_).length)??""} Clases`),Pe(Me,1,`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${e(O)==="overview"?"border-purple-500 text-purple-400":"border-transparent text-slate-400 hover:text-white"}`),Pe(X,1,`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${e(O)==="classes"?"border-purple-500 text-purple-400":"border-transparent text-slate-400 hover:text-white"}`),u($t,`Clases (${e(_),i(()=>e(_).length)??""})`),Pe(de,1,`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${e(O)==="students"?"border-purple-500 text-purple-400":"border-transparent text-slate-400 hover:text-white"}`),u(Ct,`Alumnos (${e(k),i(()=>e(k).length)??""})`)}),v(l,b)};G(ut,l=>{e(f)?l(_t,!1):l(mt)})}t(we);var bt=s(we,2);Ft(bt,{get title(){return e(xe)},get message(){return e(he)},confirmText:"Confirmar Eliminación",get type(){return e(ge)},get isOpen(){return e(W)},set isOpen(l){r(W,l)},$$events:{confirm:pt},$$legacy:!0}),v(me,He),Vt(),Le()}Et(["click"]);export{Ta as component,Ea as universal};
