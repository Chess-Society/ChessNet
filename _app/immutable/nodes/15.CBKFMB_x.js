import{d as Dt,f as w,a as b,s as Lt,b as Nt,g as at,c as x}from"../chunks/DfPprva0.js";import{i as Bt,e as oe,f as Pe,r as pe,d as _e,b as st,s as Ot,t as Gt}from"../chunks/SDohX1Oa.js";import{p as Ut,l as Ae,h as Ft,f as fe,c as a,t as h,a as Vt,g as e,m as M,b as o,s,i as ee,j as rt,n as ie,r as t,u as l,k as je}from"../chunks/B4zm7d7r.js";import{i as re}from"../chunks/CPpFl6Wl.js";import{b as xe}from"../chunks/BMuFCVKE.js";import{c as Ht,a as Rt,s as ne}from"../chunks/l-0K12sd.js";import{n as de}from"../chunks/C0n51YRF.js";import{C as qt}from"../chunks/DZBQXXAS.js";import{M as lt,E as Jt}from"../chunks/CkP46cHH.js";import{f as Kt}from"../chunks/D2R-gXPi.js";import{b as Yt}from"../chunks/CLQpBtLO.js";import{B as Te}from"../chunks/B4FdaYO9.js";import{P as ot}from"../chunks/MjU8_qJM.js";import{U as De}from"../chunks/CxlzOQ1b.js";import{C as it}from"../chunks/BilkHblz.js";import{U as Qt}from"../chunks/B8Kjdszw.js";import{S as Wt}from"../chunks/CyaytXpw.js";import{T as nt}from"../chunks/BALLaoa6.js";import{P as Xt}from"../chunks/CEyZE9SM.js";import{C as Zt}from"../chunks/C5cdKR88.js";import{C as ea}from"../chunks/D1efyGQK.js";var ta=w('<div class="col-span-full"><!></div>'),aa=w('<div class="bg-[#1e293b] border border-slate-700/50 rounded-2xl p-6 hover:shadow-2xl hover:shadow-purple-500/10 hover:border-purple-500/50 transition-all duration-300 flex flex-col group relative"><div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity"><button class="text-slate-600 hover:text-red-500 transition-colors" title="Eliminar Clase"><!></button></div> <div class="flex justify-between items-start mb-4 pr-8"><div><div class="flex items-center gap-2"><h3 class="text-xl font-bold text-white"> </h3> <button class="text-slate-500 hover:text-white" title="Editar Clase"><!></button></div> <p class="text-slate-400 text-sm mt-1"> </p></div> <span class="bg-purple-500/10 text-purple-400 text-xs font-bold px-2 py-1 rounded-lg border border-purple-500/20"> </span></div> <div class="space-y-3 mb-6 flex-1"><div class="flex items-center text-slate-400 text-sm"><!> </div> <div class="flex items-center text-slate-400 text-sm"><!> </div></div> <div class="flex gap-2 mt-auto"><a class="flex-1 bg-emerald-600/10 text-emerald-400 border border-emerald-600/20 py-2 rounded-xl text-sm font-semibold hover:bg-emerald-600 hover:text-white transition-colors flex items-center justify-center gap-2 cursor-pointer no-underline"><!> Pasar Lista</a> <button class="flex-1 bg-slate-800 text-slate-300 py-2 rounded-xl text-sm font-semibold hover:bg-purple-600 hover:text-white transition-colors cursor-pointer">Alumnos</button></div></div>'),sa=w('<p class="text-red-400 text-xs mt-1 flex items-center gap-1"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> </p>'),ra=w("<option> </option>"),la=w('<p class="text-red-400 text-xs mt-1 flex items-center gap-1"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> </p>'),oa=w("<option> </option>"),ia=w('<div class="space-y-6"><div><label for="class-name" class="block text-sm font-medium text-slate-400 mb-1">Nombre del Grupo <span class="text-red-400">*</span></label> <input id="class-name" type="text" placeholder="Ej: Iniciación Lunes"/> <!></div> <div><label for="class-center" class="block text-sm font-medium text-slate-400 mb-1">Centro Educativo <span class="text-red-400">*</span></label> <select id="class-center"><option>Selecciona un centro...</option><!></select> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="class-day" class="block text-sm font-medium text-slate-400 mb-1">Día de la Semana</label> <select id="class-day" class="form-select"></select></div> <div><label for="class-time" class="block text-sm font-medium text-slate-400 mb-1">Hora de Inicio</label> <input id="class-time" type="time" class="form-input"/></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="class-duration" class="block text-sm font-medium text-slate-400 mb-1">Duración (min)</label> <input id="class-duration" type="number" min="30" step="15" class="form-input"/></div> <div><label for="class-level" class="block text-sm font-medium text-slate-400 mb-1">Nivel</label> <select id="class-level" class="form-select"><option>Peón (Iniciación)</option><option>Alfil (Intermedio)</option><option>Torre (Avanzado)</option><option>Rey (Experto)</option></select></div></div> <div class="bg-slate-800/50 p-3 rounded-lg flex items-center gap-3"><!> <p class="text-sm text-slate-300">Se mostrará en calendario como: <span class="font-bold text-white"> </span></p></div> <div class="flex justify-end gap-3 pt-4"><button class="btn btn-ghost btn-md">Cancelar</button> <button class="btn btn-primary btn-md"> </button></div></div>'),na=w('<div class="text-center py-10 text-slate-500 text-sm">No hay alumnos asignados</div>'),da=w('<div class="bg-slate-800/80 p-3 rounded-lg flex justify-between items-center group border border-transparent hover:border-slate-600 transition-colors"><span class="text-slate-200 text-sm font-medium"> </span> <button class="text-slate-500 hover:text-red-400 p-1 bg-slate-900/50 rounded hover:bg-red-500/10 transition-colors" title="Eliminar del grupo"><!></button></div>'),va=w('<div class="space-y-2"></div>'),ca=w('<button class="w-full text-left p-2 rounded-lg flex justify-between items-center hover:bg-emerald-500/10 hover:text-emerald-400 text-slate-300 transition-colors group"><span class="text-sm truncate mr-2"> </span> <!></button>'),ua=w('<p class="text-xs text-slate-600 text-center mt-4"> </p>'),ma=w('<div class="flex flex-col md:flex-row h-[500px] border border-slate-700/50 rounded-xl overflow-hidden"><div class="flex-1 p-4 overflow-y-auto custom-scrollbar bg-slate-900/30"><h3 class="text-xs font-bold text-slate-400 uppercase mb-3 flex items-center gap-2"><!> </h3> <!></div> <div class="w-full md:w-72 bg-slate-800/30 border-l border-slate-700 p-4 flex flex-col"><h3 class="text-xs font-bold text-emerald-500 uppercase mb-3 flex items-center gap-2"><!> Añadir Nuevo</h3> <div class="relative mb-3"><!> <input type="text" placeholder="Buscar..." class="w-full bg-slate-900 border border-slate-700 rounded-lg pl-8 pr-3 py-2 text-xs text-white focus:outline-none focus:border-emerald-500"/></div> <div class="flex-1 overflow-y-auto custom-scrollbar space-y-1"><!> <!></div></div></div> <div class="flex justify-end pt-4"><button class="bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg text-sm font-bold transition-colors shadow-lg shadow-emerald-900/20">Guardar y Cerrar</button></div>',1),pa=w('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="sm:flex sm:items-center justify-between mb-8"><div class="sm:flex-auto"><h1 class="text-3xl font-bold text-white flex items-center gap-3"><!> Gestionar Clases</h1> <p class="mt-2 text-sm text-slate-400">Organiza tus grupos, horarios y controla la asistencia de hoy.</p></div> <div class="mt-4 sm:mt-0"><button type="button" class="btn btn-primary btn-md shadow-sm"><!> Nueva Clase</button></div></div> <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8"><div class="bg-[#1e293b] border border-slate-800 rounded-xl p-6"><div class="flex items-center justify-between"><div><p class="text-slate-400 text-sm font-medium">Total Clases</p> <p class="text-3xl font-bold text-white mt-1"> </p></div> <div class="bg-purple-500/10 p-3 rounded-lg"><!></div></div></div> <div class="bg-[#1e293b] border border-slate-800 rounded-xl p-6"><div class="flex items-center justify-between"><div><p class="text-slate-400 text-sm font-medium">Total Alumnos</p> <p class="text-3xl font-bold text-white mt-1"> </p></div> <div class="bg-emerald-500/10 p-3 rounded-lg"><!></div></div></div> <div class="bg-[#1e293b] border border-slate-800 rounded-xl p-6"><div class="flex items-center justify-between"><div><p class="text-slate-400 text-sm font-medium">Centros Activos</p> <p class="text-3xl font-bold text-white mt-1"> </p></div> <div class="bg-blue-500/10 p-3 rounded-lg"><!></div></div></div></div> <div><div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"><!></div></div></div>  <!> <!> <!>',1);function La(dt,vt){Ut(vt,!1);const Le=()=>Nt(Rt,"$appStore",ct),[ct,ut]=Lt(),_=M(),ve=M();let O=M(!1),i=M({id:"",name:"",centerId:"",schedule:"",level:"Pawn",students:[],duration:60}),G=M("Lunes"),K=M("17:00");const Ne=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"];let ce=M(!1),v=M(null),te=M(""),c=M({});function mt(){o(c,{});let r=!0;return(!e(i).name||e(i).name.trim().length<3)&&(ee(c,e(c).name="El nombre debe tener al menos 3 caracteres"),r=!1),e(i).centerId||(ee(c,e(c).centerId="Selecciona un centro"),r=!1),r}function Be(){if(!e(O)&&(o(i,{id:"",name:"",centerId:"",schedule:"",level:"Pawn",students:[],duration:60}),o(G,"Lunes"),o(K,"17:00"),o(c,{}),!Ht(e(_),"classes"))){de.warning(`Has alcanzado el límite de clases de tu plan actual (${e(_).settings.plan}). Actualiza tu plan.`);return}o(O,!e(O))}function pt(r){o(v,r),o(te,""),o(ce,!0)}function _t(r){e(v)&&(ne.addClassMember(e(v).id,r),o(v,{...e(v),students:[...e(v).students,r]}))}function ft(r){e(v)&&(ne.removeClassMember(e(v).id,r),o(v,{...e(v),students:e(v).students.filter(n=>n!==r)}))}function xt(r){const n=e(_).students.find(P=>P.id===r);return n?n.name:"Alumno Desconocido"}function bt(){if(!mt()){de.error("Por favor, corrige los errores del formulario");return}if(e(i).id)ne.updateClass(e(i)),de.success("Clase actualizada");else{const r={...e(i),id:crypto.randomUUID()};ne.addClass(r),de.success("Clase creada")}o(O,!1),o(c,{})}function gt(r){const n=r.schedule.split(" ");n.length>=2&&(Ne.includes(n[0])&&o(G,n[0]),o(K,n[1])),o(i,{...r}),o(c,{}),o(O,!0)}let be=M(!1),ue=null;function ht(r){ue=r,o(be,!0)}function wt(){ue&&(ne.removeClass(ue),ue=null,de.success("Clase eliminada correctamente."))}function yt(r){const n=e(_).centers.find(P=>P.id===r);return n?n.name:"Centro Desconocido"}Ae(()=>Le(),()=>{o(_,Le())}),Ae(()=>(e(G),e(K)),()=>{ee(i,e(i).schedule=`${e(G)} ${e(K)}`)}),Ae(()=>(e(v),e(_),e(te)),()=>{o(ve,e(v)?e(_).students.filter(r=>!e(v)?.students.includes(r.id)&&r.name.toLowerCase().includes(e(te).toLowerCase())):[])}),Ft(),Bt();var Oe=pa(),ge=fe(Oe),he=a(ge),we=a(he),Ge=a(we),Ct=a(Ge);Te(Ct,{class:"w-8 h-8 text-purple-400"}),ie(),t(Ge),ie(2),t(we);var Ue=s(we,2),ye=a(Ue);ye.__click=Be;var $t=a(ye);ot($t,{class:"w-4 h-4 mr-2"}),ie(),t(ye),t(Ue),t(he);var Ce=s(he,2),$e=a(Ce),Fe=a($e),ke=a(Fe),Ve=s(a(ke),2),kt=a(Ve,!0);t(Ve),t(ke);var He=s(ke,2),St=a(He);Te(St,{class:"w-6 h-6 text-purple-500"}),t(He),t(Fe),t($e);var Se=s($e,2),Re=a(Se),Me=a(Re),qe=s(a(Me),2),Mt=a(qe,!0);t(qe),t(Me);var Je=s(Me,2),zt=a(Je);De(zt,{class:"w-6 h-6 text-emerald-500"}),t(Je),t(Re),t(Se);var Ke=s(Se,2),Ye=a(Ke),ze=a(Ye),Qe=s(a(ze),2),Et=a(Qe,!0);t(Qe),t(ze);var We=s(ze,2),It=a(We);it(It,{class:"w-6 h-6 text-blue-500"}),t(We),t(Ye),t(Ke),t(Ce);var Xe=s(Ce,2),Ze=a(Xe),Pt=a(Ze);{var At=r=>{var n=ta(),P=a(n);Jt(P,{get icon(){return Te},title:"No hay clases creadas",description:"Crea tu primer grupo de alumnos para empezar. Podrás asignar horarios y niveles.",actionLabel:"Crear Clase",$$events:{action:Be}}),t(n),b(r,n)},jt=r=>{var n=at(),P=fe(n);oe(P,3,()=>(e(_),l(()=>e(_).classes)),z=>z.id,(z,u,U)=>{var E=aa(),F=a(E),$=a(F);$.__click=()=>ht(e(u).id);var k=a($);nt(k,{class:"w-4 h-4"}),t($),t(F);var S=s(F,2),V=a(S),Y=a(V),Q=a(Y),W=a(Q,!0);t(Q);var A=s(Q,2);A.__click=()=>gt(e(u));var H=a(A);Xt(H,{class:"w-3 h-3"}),t(A),t(Y);var j=s(Y,2),ae=a(j,!0);t(j),t(V);var I=s(V,2),R=a(I,!0);t(I),t(S);var T=s(S,2),D=a(T),L=a(D);Zt(L,{class:"w-4 h-4 mr-2 text-slate-500"});var X=s(L);t(D);var q=s(D,2),N=a(q);De(N,{class:"w-4 h-4 mr-2 text-slate-500"});var se=s(N);t(q),t(T);var m=s(T,2),p=a(m),y=a(p);ea(y,{class:"w-4 h-4"}),ie(),t(p);var C=s(p,2);C.__click=()=>pt(e(u)),t(m),t(E),h(B=>{x(W,(e(u),l(()=>e(u).name))),x(ae,B),x(R,(e(u),l(()=>e(u).level))),x(X,` ${e(u),l(()=>e(u).schedule)??""}`),x(se,` ${e(u),l(()=>e(u).students.length)??""} Alumnos inscritos`),Ot(p,"href",`${Yt??""}/panel/asistencia?classId=${e(u),l(()=>e(u).id)??""}`)},[()=>(e(u),l(()=>yt(e(u).centerId)))]),Gt(1,E,()=>Kt,()=>({y:20,duration:400,delay:e(U)*50})),b(z,E)}),b(r,n)};re(Pt,r=>{e(_),l(()=>e(_).classes.length===0)?r(At):r(jt,!1)})}t(Ze),t(Xe),t(ge);var et=s(ge,2);{let r=rt(()=>(e(i),l(()=>e(i).id?"Editar Clase":"Crear Nuevo Grupo")));lt(et,{get title(){return e(r)},size:"md",get isOpen(){return e(O)},set isOpen(n){o(O,n)},children:(n,P)=>{var z=ia(),u=a(z),U=s(a(u),2);pe(U);var E=s(U,2);{var F=d=>{var f=sa(),g=s(a(f));t(f),h(()=>x(g,` ${e(c),l(()=>e(c).name)??""}`)),b(d,f)};re(E,d=>{e(c),l(()=>e(c).name)&&d(F)})}t(u);var $=s(u,2),k=s(a($),2);h(()=>{e(i),je(()=>{e(c),e(_)})});var S=a(k);S.value=S.__value="";var V=s(S);oe(V,1,()=>(e(_),l(()=>e(_).centers)),_e,(d,f)=>{var g=ra(),Ie=a(g,!0);t(g);var le={};h(()=>{x(Ie,(e(f),l(()=>e(f).name))),le!==(le=(e(f),l(()=>e(f).id)))&&(g.value=(g.__value=(e(f),l(()=>e(f).id)))??"")}),b(d,g)}),t(k);var Y=s(k,2);{var Q=d=>{var f=la(),g=s(a(f));t(f),h(()=>x(g,` ${e(c),l(()=>e(c).centerId)??""}`)),b(d,f)};re(Y,d=>{e(c),l(()=>e(c).centerId)&&d(Q)})}t($);var W=s($,2),A=a(W),H=s(a(A),2);h(()=>{e(G),je(()=>{})}),oe(H,5,()=>Ne,_e,(d,f)=>{var g=oa(),Ie=a(g,!0);t(g);var le={};h(()=>{x(Ie,e(f)),le!==(le=e(f))&&(g.value=(g.__value=e(f))??"")}),b(d,g)}),t(H),t(A);var j=s(A,2),ae=s(a(j),2);pe(ae),t(j),t(W);var I=s(W,2),R=a(I),T=s(a(R),2);pe(T),t(R);var D=s(R,2),L=s(a(D),2);h(()=>{e(i),je(()=>{})});var X=a(L);X.value=X.__value="Pawn";var q=s(X);q.value=q.__value="Bishop";var N=s(q);N.value=N.__value="Rook";var se=s(N);se.value=se.__value="King",t(L),t(D),t(I);var m=s(I,2),p=a(m);it(p,{class:"w-5 h-5 text-purple-400"});var y=s(p,2),C=s(a(y)),B=a(C);t(C),t(y),t(m);var J=s(m,2),me=a(J);me.__click=()=>o(O,!1);var Z=s(me,2);Z.__click=bt;var Ee=a(Z,!0);t(Z),t(J),t(z),h(()=>{st(U,1,`form-input ${e(c),l(()=>e(c).name?"border-red-500 focus:border-red-500 focus:ring-red-500/50":"")??""}`),st(k,1,`form-select ${e(c),l(()=>e(c).centerId?"border-red-500 focus:border-red-500 focus:ring-red-500/50":"")??""}`),x(B,`${e(G)??""} ${e(K)??""}`),x(Ee,(e(i),l(()=>e(i).id?"Guardar Cambios":"Crear Clase")))}),xe(U,()=>e(i).name,d=>ee(i,e(i).name=d)),Pe(k,()=>e(i).centerId,d=>ee(i,e(i).centerId=d)),Pe(H,()=>e(G),d=>o(G,d)),xe(ae,()=>e(K),d=>o(K,d)),xe(T,()=>e(i).duration,d=>ee(i,e(i).duration=d)),Pe(L,()=>e(i).level,d=>ee(i,e(i).level=d)),b(n,z)},$$slots:{default:!0},$$legacy:!0})}var tt=s(et,2);qt(tt,{title:"¿Eliminar clase?",message:"Esta acción eliminará el grupo y todos sus registros de asistencia. Los alumnos no se borrarán.",confirmText:"Eliminar Clase",get isOpen(){return e(be)},set isOpen(r){o(be,r)},$$events:{confirm:wt},$$legacy:!0});var Tt=s(tt,2);{let r=rt(()=>(e(v),l(()=>"Gestionar Alumnos: "+(e(v)?.name||""))));lt(Tt,{get title(){return e(r)},size:"lg",get isOpen(){return e(ce)},set isOpen(n){o(ce,n)},children:(n,P)=>{var z=at(),u=fe(z);{var U=E=>{var F=ma(),$=fe(F),k=a($),S=a(k),V=a(S);De(V,{class:"w-3 h-3"});var Y=s(V);t(S);var Q=s(S,2);{var W=m=>{var p=na();b(m,p)},A=m=>{var p=va();oe(p,5,()=>(e(v),l(()=>e(v).students)),_e,(y,C)=>{var B=da(),J=a(B),me=a(J,!0);t(J);var Z=s(J,2);Z.__click=()=>ft(e(C));var Ee=a(Z);nt(Ee,{class:"w-3 h-3"}),t(Z),t(B),h(d=>x(me,d),[()=>(e(C),l(()=>xt(e(C))))]),b(y,B)}),t(p),b(m,p)};re(Q,m=>{e(v),l(()=>e(v).students.length===0)?m(W):m(A,!1)})}t(k);var H=s(k,2),j=a(H),ae=a(j);Qt(ae,{class:"w-3 h-3"}),ie(),t(j);var I=s(j,2),R=a(I);Wt(R,{class:"absolute left-3 top-2.5 w-3 h-3 text-slate-500"});var T=s(R,2);pe(T),t(I);var D=s(I,2),L=a(D);oe(L,1,()=>e(ve),_e,(m,p)=>{var y=ca();y.__click=()=>_t(e(p).id);var C=a(y),B=a(C,!0);t(C);var J=s(C,2);ot(J,{class:"w-3 h-3 opacity-0 group-hover:opacity-100"}),t(y),h(()=>x(B,(e(p),l(()=>e(p).name)))),b(m,y)});var X=s(L,2);{var q=m=>{var p=ua(),y=a(p,!0);t(p),h(()=>x(y,e(te)?"No encontrado":"Busca un alumno...")),b(m,p)};re(X,m=>{e(ve),l(()=>e(ve).length===0)&&m(q)})}t(D),t(H),t($);var N=s($,2),se=a(N);se.__click=()=>o(ce,!1),t(N),h(()=>x(Y,` Inscritos (${e(v),l(()=>e(v).students.length)??""})`)),xe(T,()=>e(te),m=>o(te,m)),b(E,F)};re(u,E=>{e(v)&&E(U)})}b(n,z)},$$slots:{default:!0},$$legacy:!0})}h(()=>{x(kt,(e(_),l(()=>e(_).classes.length))),x(Mt,(e(_),l(()=>e(_).students.length))),x(Et,(e(_),l(()=>e(_).centers.length)))}),b(dt,Oe),Vt(),ut()}Dt(["click"]);export{La as component};
