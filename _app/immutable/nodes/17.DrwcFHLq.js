import{l as Oe,e as Fe,g as Ge,a as f,f as b,h as A,s as Re,b as Be,c as P}from"../chunks/DfPprva0.js";import{I as Ve,a as Ze,i as qe,e as xe,d as He,r as ge,t as Je,l as Ke,b as Qe}from"../chunks/SDohX1Oa.js";import{f as we,p as We,l as _e,h as Xe,a as Ye,g as e,m as p,c as a,s as o,b as i,n as oe,r as t,Z as et,i as re,u as m,t as G}from"../chunks/B4zm7d7r.js";import{i as h}from"../chunks/CPpFl6Wl.js";import{b as ie}from"../chunks/BMuFCVKE.js";import{a as tt,s as R}from"../chunks/l-0K12sd.js";import{n as he}from"../chunks/C0n51YRF.js";import{a as at}from"../chunks/D2R-gXPi.js";import{f as st}from"../chunks/BviiYr3T.js";import{C as ot}from"../chunks/DZBQXXAS.js";import{U as rt}from"../chunks/B8Kjdszw.js";import{P as it}from"../chunks/MjU8_qJM.js";import{C as nt}from"../chunks/CXsNeB2N.js";import{M as lt}from"../chunks/-rS_536-.js";function dt(B,U){const j=Oe(U,["children","$$slots","$$events","$$legacy"]);const V=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384"}]];Ve(B,Fe({name:"phone"},()=>j,{get iconNode(){return V},children:(Z,T)=>{var u=Ge(),w=we(u);Ze(w,U,"default",{}),f(Z,u)},$$slots:{default:!0}}))}var ct=b('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm"><div class="bg-[#1e293b] rounded-xl shadow-2xl p-6 w-full max-w-md border border-slate-700"><h3 class="text-lg font-bold mb-4 text-white">Añadir Interesado</h3> <div class="space-y-3"><div><label class="block text-sm font-medium text-slate-400 mb-1" for="lead-name">Nombre</label> <input id="lead-name" type="text" class="w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 focus:outline-none placeholder-slate-600" placeholder="Nombre del alumno/padre"/></div> <div><label class="block text-sm font-medium text-slate-400 mb-1" for="lead-contact">Contacto</label> <input id="lead-contact" type="text" class="w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 focus:outline-none placeholder-slate-600" placeholder="Teléfono o Email"/></div> <div><label class="block text-sm font-medium text-slate-400 mb-1" for="lead-notes">Notas Iniciales</label> <textarea id="lead-notes" class="w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:border-indigo-500 focus:outline-none placeholder-slate-600" placeholder="Interés, edad, nivel..."></textarea></div> <div class="flex justify-end gap-3 pt-2"><button class="px-4 py-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors">Cancelar</button> <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Guardar</button></div></div></div></div>'),vt=b('<div class="flex items-center gap-2 text-sm text-slate-400 mb-2"><!> </div>'),mt=b('<p class="text-xs text-slate-500 mb-3 bg-slate-800/50 p-2 rounded italic"> </p>'),ut=b('<button class="flex-1 py-1 text-xs bg-slate-800 hover:bg-slate-700 text-slate-400 rounded transition-colors" title="Mover Atrás">←</button>'),ft=b('<button class="flex-1 py-1 text-xs bg-indigo-600/20 hover:bg-indigo-600/40 text-indigo-400 hover:text-white rounded transition-colors font-medium" title="Avanzar Estado">Avanzar →</button>'),pt=b('<div class="bg-[#1e293b] p-4 rounded-lg border border-slate-700 shadow-sm hover:border-slate-500 transition-all group"><div class="flex justify-between items-start mb-2"><h4 class="font-bold text-white text-base"> </h4> <button class="text-slate-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity"><!></button></div> <!> <!> <div class="flex gap-1 mt-2 pt-2 border-t border-slate-700/50"><!> <!></div></div>'),bt=b('<div class="text-center py-8 text-slate-600 text-sm border-2 border-dashed border-slate-800 rounded-lg">Vacío</div>'),xt=b('<div class="w-80 flex flex-col bg-slate-900/50 border border-slate-700 rounded-xl overflow-hidden"><div class="p-4 border-b border-slate-700 flex justify-between items-center bg-slate-800/50"><div class="flex items-center gap-2"><div></div> <span class="font-bold text-white"> </span></div> <span class="text-xs bg-slate-700 px-2 py-0.5 rounded text-slate-300"> </span></div> <div class="flex-1 p-3 overflow-y-auto space-y-3 custom-scrollbar"><!> <!></div></div>'),gt=b('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-[calc(100vh-6rem)] flex flex-col"><div class="flex justify-between items-center py-6"><div><h1 class="text-3xl font-bold text-white flex items-center gap-3"><!> CRM / Interesados</h1> <p class="mt-1 text-slate-400">Gestiona potenciales alumnos y seguimientos.</p></div> <button class="btn btn-primary bg-indigo-600 hover:bg-indigo-500"><!> Nuevo Interesado</button></div> <!> <div class="flex-1 overflow-x-auto pb-4"><div class="flex gap-6 min-w-max h-full"></div></div></div> <!>',1);function Pt(B,U){We(U,!1);const j=()=>Be(tt,"$appStore",V),[V,Z]=Re(),T=p(),u=p();let w=p(!1),d=p({name:"",contact:"",notes:"",status:"new",source:"web"});const M=[{id:"new",label:"Nuevos",color:"bg-blue-500"},{id:"contacted",label:"Contactados",color:"bg-amber-500"},{id:"trial",label:"Clase Prueba",color:"bg-purple-500"},{id:"converted",label:"Inscritos",color:"bg-emerald-500"}];function ye(){e(d).name&&(R.addLead({id:crypto.randomUUID(),name:e(d).name,contact:e(d).contact||"",notes:e(d).notes||"",status:"new",source:"web",createdAt:new Date().toISOString()}),i(w,!1),i(d,{name:"",contact:"",notes:""}))}let N=p(!1),q=p(""),H=p(""),J=p("danger"),z=null,K=p("Confirmar");function ne(n,s){R.updateLead({...n,status:s}),s==="converted"&&(i(q,"¡Felicidades! Nuevo Alumno"),i(H,`¿Deseas añadir a ${n.name} a tu lista de estudiantes oficiales ahora mismo?`),i(J,"info"),i(K,"Sí, añadir alumno"),z=()=>{R.addStudent({id:crypto.randomUUID(),name:n.name,email:n.contact.includes("@")?n.contact:"",level:"Pawn",notes:`Convertido desde CRM. Notas: ${n.notes||""}`}),he.success(`${n.name} ha sido añadido a la lista de estudiantes.`)},i(N,!0))}function $e(n){i(q,"¿Eliminar interesado?"),i(H,"Esta acción eliminará la ficha de este posible alumno. ¿Estás seguro?"),i(J,"danger"),i(K,"Eliminar"),z=()=>{R.removeLead(n),he.success("Interesado eliminado.")},i(N,!0)}function Ce(){z&&z(),i(N,!1)}_e(()=>j(),()=>{i(T,j())}),_e(()=>e(T),()=>{i(u,e(T).leads||[])}),Xe(),qe();var le=gt(),Q=we(le),W=a(Q),X=a(W),de=a(X),Ie=a(de);rt(Ie,{class:"w-8 h-8 text-indigo-500"}),oe(),t(de),oe(2),t(X);var Y=o(X,2),ke=a(Y);it(ke,{class:"w-5 h-5 mr-2"}),oe(),t(Y),t(W);var ce=o(W,2);{var Ae=n=>{var s=ct(),y=a(s),$=o(a(y),2),g=a($),L=o(a(g),2);ge(L),t(g);var C=o(g,2),D=o(a(C),2);ge(D),t(C);var I=o(C,2),O=o(a(I),2);et(O),t(I);var S=o(I,2),E=a(S),ee=o(E,2);t(S),t($),t(y),t(s),ie(L,()=>e(d).name,_=>re(d,e(d).name=_)),ie(D,()=>e(d).contact,_=>re(d,e(d).contact=_)),ie(O,()=>e(d).notes,_=>re(d,e(d).notes=_)),A("click",E,()=>i(w,!1)),A("click",ee,ye),Je(3,s,()=>at),f(n,s)};h(ce,n=>{e(w)&&n(Ae)})}var ve=o(ce,2),me=a(ve);xe(me,5,()=>M,He,(n,s)=>{var y=xt(),$=a(y),g=a($),L=a(g),C=o(L,2),D=a(C,!0);t(C),t(g);var I=o(g,2),O=a(I,!0);t(I),t($);var S=o($,2),E=a(S);xe(E,9,()=>(e(u),e(s),m(()=>e(u).filter(c=>c.status===e(s).id))),c=>c.id,(c,r)=>{var F=pt(),te=a(F),ae=a(te),Ne=a(ae,!0);t(ae);var se=o(ae,2),Le=a(se);nt(Le,{class:"w-4 h-4"}),t(se),t(te);var ue=o(te,2);{var Se=l=>{var v=vt(),x=a(v);{var Te=k=>{lt(k,{class:"w-3 h-3"})},ze=k=>{dt(k,{class:"w-3 h-3"})};h(x,k=>{e(r),m(()=>e(r).contact.includes("@"))?k(Te):k(ze,!1)})}var De=o(x);t(v),G(()=>P(De,` ${e(r),m(()=>e(r).contact)??""}`)),f(l,v)};h(ue,l=>{e(r),m(()=>e(r).contact)&&l(Se)})}var fe=o(ue,2);{var Ee=l=>{var v=mt(),x=a(v);t(v),G(()=>P(x,`"${e(r),m(()=>e(r).notes)??""}"`)),f(l,v)};h(fe,l=>{e(r),m(()=>e(r).notes)&&l(Ee)})}var pe=o(fe,2),be=a(pe);{var Pe=l=>{var v=ut();A("click",v,()=>ne(e(r),M[M.findIndex(x=>x.id===e(s).id)-1].id)),f(l,v)};h(be,l=>{e(s),m(()=>e(s).id!=="new")&&l(Pe)})}var Ue=o(be,2);{var je=l=>{var v=ft();A("click",v,()=>ne(e(r),M[M.findIndex(x=>x.id===e(s).id)+1].id)),f(l,v)};h(Ue,l=>{e(s),m(()=>e(s).id!=="converted")&&l(je)})}t(pe),t(F),G(()=>P(Ne,(e(r),m(()=>e(r).name)))),A("click",se,()=>$e(e(r).id)),Ke(F,()=>st,()=>({duration:300})),f(c,F)});var ee=o(E,2);{var _=c=>{var r=bt();f(c,r)};h(ee,c=>{e(u),e(s),m(()=>e(u).filter(r=>r.status===e(s).id).length===0)&&c(_)})}t(S),t(y),G(c=>{Qe(L,1,`w-3 h-3 rounded-full ${e(s),m(()=>e(s).color)??""}`),P(D,(e(s),m(()=>e(s).label))),P(O,c)},[()=>(e(u),e(s),m(()=>e(u).filter(c=>c.status===e(s).id).length))]),f(n,y)}),t(me),t(ve),t(Q);var Me=o(Q,2);ot(Me,{get title(){return e(q)},get message(){return e(H)},get confirmText(){return e(K)},get type(){return e(J)},get isOpen(){return e(N)},set isOpen(n){i(N,n)},$$events:{confirm:Ce},$$legacy:!0}),A("click",Y,()=>i(w,!0)),f(B,le),Ye(),Z()}export{Pt as component};
