import{l as _e,e as fe,g as ge,a as g,b as he,f as h,s as be,c as x}from"../chunks/DfPprva0.js";import{I as me,a as we,i as ye,e as A,t as $e,d as R,c as j,b as Me}from"../chunks/SDohX1Oa.js";import{f as Ne,p as je,m as b,b as m,l as $,h as ke,t as M,a as Ae,g as t,c as s,s as o,n as w,r as a,u as n,j as Re}from"../chunks/B4zm7d7r.js";import{i as S}from"../chunks/CPpFl6Wl.js";import{a as Dt}from"../chunks/l-0K12sd.js";import{a as Se}from"../chunks/D2R-gXPi.js";import{C as Be}from"../chunks/DxJCryu2.js";import{C as Ce}from"../chunks/BilkHblz.js";import{T as Ee}from"../chunks/D3cfiXoy.js";import{U as lt}from"../chunks/CxlzOQ1b.js";import{A as Pe}from"../chunks/DDbj7e-1.js";function Te(z,E){const D=_e(E,["children","$$slots","$$events","$$legacy"]);const L=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}]];me(z,fe({name:"chart-pie"},()=>D,{get iconNode(){return L},children:(K,k)=>{var B=ge(),C=Ne(B);we(C,E,"default",{}),g(K,B)},$$slots:{default:!0}}))}var Ie=h('<div><div class="flex justify-between text-sm mb-1"><span class="text-slate-300"> </span> <span class="text-slate-400"> </span></div> <div class="w-full bg-slate-800 rounded-full h-2"><div class="h-2 rounded-full transition-all duration-1000 bg-pink-500"></div></div></div>'),ze=h('<p class="text-slate-500 text-sm italic text-center">No hay clases registradas.</p>'),De=h('<div class="absolute top-2 left-1/2 -translate-x-1/2 text-white text-xs font-bold"> </div>'),Le=h('<div class="flex-1 flex flex-col items-center group cursor-default"><div class="w-full rounded-t-lg relative transition-all duration-300 bg-gradient-to-t from-teal-500/40 to-teal-500/20 border-t-4 border-teal-500 hover:from-teal-500/60 hover:to-teal-500/30"><div class="absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-xs py-1.5 px-3 rounded-lg border border-slate-700 shadow-xl opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap pointer-events-none"><div class="font-bold text-teal-400"> </div> <div class="text-[10px] text-slate-400"> </div></div> <!></div> <p class="text-xs text-slate-400 mt-3 uppercase font-medium"> </p></div>'),Ke=h('<div><div class="flex justify-between text-sm mb-2"><span class="text-slate-300 font-medium"> </span> <span class="text-slate-500"> </span></div> <div class="w-full bg-slate-800 rounded-full h-3 overflow-hidden"><div></div></div></div>'),Oe=h('<p class="text-slate-500 text-center italic">No hay estudiantes registrados.</p>'),Fe=h('<div><div class="flex justify-between text-sm mb-1"><span class="text-slate-300 capitalize"> </span> <span class="text-slate-400"> </span></div> <div class="w-full bg-slate-800 rounded-full h-2"><div class="h-2 rounded-full transition-all duration-1000 bg-cyan-500"></div></div></div>'),He=h('<p class="text-slate-500 text-sm italic text-center">No hay datos de pagos.</p>'),Ue=h('<div><div class="flex justify-between text-sm mb-1"><span class="text-slate-300"> </span> <span class="text-slate-400"> </span></div> <div class="w-full bg-slate-800 rounded-full h-2"><div class="h-2 rounded-full transition-all duration-1000 bg-yellow-500"></div></div></div>'),qe=h('<p class="text-slate-500 text-sm italic text-center">No hay habilidades registradas.</p>'),Ve=h('<div><div class="flex justify-between text-sm mb-1"><span class="text-slate-300"> </span> <span class="text-slate-400"> </span></div> <div class="w-full bg-slate-800 rounded-full h-2"><div class="h-2 rounded-full transition-all duration-1000 bg-pink-500"></div></div></div>'),We=h('<p class="text-slate-500 text-sm italic text-center">No hay clases registradas.</p>'),Ye=h('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="mb-8"><h1 class="text-3xl font-bold text-white flex items-center gap-3"><!> Analíticas</h1> <p class="mt-2 text-slate-400">Visión general del rendimiento de tu escuela.</p></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"><div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><div class="flex justify-between items-start"><div><p class="text-slate-400 text-sm font-medium">Asistencia Promedio</p> <p class="text-3xl font-bold text-white mt-2"> </p></div> <div class="bg-pink-500/10 p-3 rounded-xl"><!></div></div> <div class="mt-4 w-full bg-slate-800 rounded-full h-2"><div class="bg-pink-500 h-2 rounded-full"></div></div></div> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><div class="flex justify-between items-start"><div><p class="text-slate-400 text-sm font-medium">Ingresos Totales</p> <p class="text-3xl font-bold text-white mt-2"> </p></div> <div class="bg-teal-500/10 p-3 rounded-xl"><!></div></div> <p class="text-xs text-slate-500 mt-4">Calculado sobre historial de pagos</p></div> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><div class="flex justify-between items-start"><div><p class="text-slate-400 text-sm font-medium">Total Alumnos</p> <p class="text-3xl font-bold text-white mt-2"> </p></div> <div class="bg-emerald-500/10 p-3 rounded-xl"><!></div></div> <p class="text-xs text-slate-500 mt-4">Matriculados actualmente</p></div></div> <div class="mt-8 grid grid-cols-1"><div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2"><!> Asistencia por Clase</h3> <div class="space-y-4"><!> <!></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-6">Ingresos Últimos 6 Meses</h3> <div class="h-64 flex items-end justify-between gap-3 px-2"></div></div> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-6">Distribución por Nivel</h3> <div class="space-y-6"><!> <!></div> <div class="mt-8 p-4 bg-slate-900/50 rounded-xl border border-slate-800/50"><p class="text-sm text-slate-400 italic text-center">"La táctica fluye de una posición superior."</p> <p class="text-xs text-slate-600 text-center mt-1">— Bobby Fischer</p></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8"><div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2"><!> Métodos de Pago</h3> <div class="space-y-4"><!> <!></div></div> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2"><!> Habilidades Más Dominadas</h3> <div class="space-y-4"><!> <!></div></div></div> <div class="mt-8 grid grid-cols-1"><div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-6"><h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2"><!> Asistencia por Clase</h3> <div class="space-y-4"><!> <!></div></div></div></div>');function ia(z,E){je(E,!1);const D=()=>he(Dt,"$appStore",L),[L,K]=be(),k=b(),B=b(),C=b(),ot=b(),nt=b(),P=b(),T=b(),N=b();let c=b(D());Dt.subscribe(i=>m(c,i));function Lt(i){if(i.length===0)return 0;let e=0,l=0;return i.forEach(d=>{d.records.forEach(r=>{e++,r.status==="present"&&l++})}),e===0?0:Math.round(l/e*100)}function Kt(i){const e={Pawn:0,Bishop:0,Rook:0,King:0},l={Pawn:"Peón",Bishop:"Alfil",Rook:"Torre",King:"Rey"};return i.forEach(d=>{const r=d.level||"Pawn";e[r]!==void 0?e[r]++:e[r]=(e[r]||0)+1}),Object.entries(e).map(([d,r])=>({name:l[d]||d,count:r,percentage:t(k)>0?r/t(k)*100:0,originalName:d}))}function Ot(i){const e=[],l=new Date;for(let r=5;r>=0;r--){const p=new Date(l.getFullYear(),l.getMonth()-r,1),v=p.toISOString().slice(0,7),f=p.toLocaleString("es-ES",{month:"short"}),u=i.filter(_=>_.date.startsWith(v)).reduce((_,y)=>_+y.amount,0);e.push({label:f,total:u,key:v})}const d=Math.max(...e.map(r=>r.total),10);return e.map(r=>({...r,height:r.total/d*100}))}function Ft(i){const e={};let l=0;return i.forEach(d=>{const r=d.method||"cash";e[r]=(e[r]||0)+d.amount,l+=d.amount}),Object.entries(e).map(([d,r])=>({method:d,amount:r,percent:l?r/l*100:0})).sort((d,r)=>r.amount-d.amount)}function Ht(i,e){return i.length?e.map(l=>{const d=i.filter(r=>r.skills?.includes(l.id)).length;return{name:l.name,count:d,percent:i.length?d/i.length*100:0}}).sort((l,d)=>d.count-l.count).slice(0,5):[]}function Ut(i,e){return i.map(l=>{const d=e.filter(v=>v.classId===l.id);if(d.length===0)return{name:l.name,rate:0,count:0};let r=0,p=0;return d.forEach(v=>{v.records.forEach(f=>{r++,f.status==="present"&&p++})}),{name:l.name,rate:r===0?0:Math.round(p/r*100),count:d.length}}).sort((l,d)=>d.rate-l.rate)}$(()=>t(c),()=>{m(k,t(c).students.length)}),$(()=>t(c),()=>{m(B,t(c).payments.reduce((i,e)=>i+e.amount,0))}),$(()=>t(c),()=>{m(C,Lt(t(c).attendance))}),$(()=>t(c),()=>{m(ot,Kt(t(c).students))}),$(()=>t(c),()=>{m(nt,Ot(t(c).payments))}),$(()=>t(c),()=>{m(P,Ft(t(c).payments))}),$(()=>t(c),()=>{m(T,Ht(t(c).students,t(c).skills))}),$(()=>t(c),()=>{m(N,Ut(t(c).classes,t(c).attendance))}),ke(),ye();var I=Ye(),O=s(I),vt=s(O),qt=s(vt);Be(qt,{class:"w-8 h-8 text-cyan-400"}),w(),a(vt),w(2),a(O);var F=o(O,2),H=s(F),U=s(H),q=s(U),ct=o(s(q),2),Vt=s(ct);a(ct),a(q);var pt=o(q,2),Wt=s(pt);Ce(Wt,{class:"w-6 h-6 text-pink-500"}),a(pt),a(U);var ut=o(U,2),Yt=s(ut);a(ut),a(H);var V=o(H,2),xt=s(V),W=s(xt),_t=o(s(W),2),Gt=s(_t);a(_t),a(W);var ft=o(W,2),Jt=s(ft);Ee(Jt,{class:"w-6 h-6 text-teal-500"}),a(ft),a(xt),w(2),a(V);var gt=o(V,2),ht=s(gt),Y=s(ht),bt=o(s(Y),2),Qt=s(bt,!0);a(bt),a(Y);var mt=o(Y,2),Xt=s(mt);lt(Xt,{class:"w-6 h-6 text-emerald-500"}),a(mt),a(ht),w(2),a(gt),a(F);var G=o(F,2),wt=s(G),J=s(wt),Zt=s(J);lt(Zt,{class:"w-5 h-5 text-pink-500"}),w(),a(J);var yt=o(J,2),$t=s(yt);A($t,1,()=>t(N),R,(i,e)=>{var l=Ie(),d=s(l),r=s(d),p=s(r,!0);a(r);var v=o(r,2),f=s(v);a(v),a(d);var u=o(d,2),_=s(u);a(u),a(l),M(()=>{x(p,(t(e),n(()=>t(e).name))),x(f,`${t(e),n(()=>t(e).rate)??""}% (${t(e),n(()=>t(e).count)??""} sesiones)`),j(_,`width: ${t(e),n(()=>t(e).rate)??""}%`)}),g(i,l)});var te=o($t,2);{var ee=i=>{var e=ze();g(i,e)};S(te,i=>{t(N),n(()=>t(N).length===0)&&i(ee)})}a(yt),a(wt),a(G);var Q=o(G,2),X=s(Q),Mt=o(s(X),2);A(Mt,5,()=>t(nt),R,(i,e)=>{const l=Re(()=>(t(e),n(()=>Math.max(t(e).height,8))));var d=Le(),r=s(d),p=s(r),v=s(p),f=s(v);a(v);var u=o(v,2),_=s(u,!0);a(u),a(p);var y=o(p,2);{var rt=dt=>{var it=De(),xe=s(it);a(it),M(()=>x(xe,`${t(e),n(()=>t(e).total)??""}€`)),g(dt,it)};S(y,dt=>{t(e),n(()=>t(e).height>=40)&&dt(rt)})}a(r);var zt=o(r,2),ue=s(zt,!0);a(zt),a(d),M(()=>{j(r,`height: ${t(l)??""}%`),x(f,`${t(e),n(()=>t(e).total)??""}€`),x(_,(t(e),n(()=>t(e).label))),x(ue,(t(e),n(()=>t(e).label)))}),g(i,d)}),a(Mt),a(X);var Nt=o(X,2),jt=o(s(Nt),2),kt=s(jt);A(kt,1,()=>t(ot),R,(i,e)=>{var l=Ke(),d=s(l),r=s(d),p=s(r,!0);a(r);var v=o(r,2),f=s(v);a(v),a(d);var u=o(d,2),_=s(u);let y;a(u),a(l),M(rt=>{x(p,(t(e),n(()=>t(e).name))),x(f,`${t(e),n(()=>t(e).count)??""} alumnos (${rt??""}%)`),y=Me(_,1,"h-3 rounded-full transition-all duration-1000",null,y,{"bg-blue-500":t(e).originalName==="Pawn","bg-emerald-500":t(e).originalName==="Bishop","bg-purple-500":t(e).originalName==="Rook","bg-orange-500":t(e).originalName==="King"}),j(_,`width: ${t(e),n(()=>t(e).percentage)??""}%;`)},[()=>(t(e),n(()=>Math.round(t(e).percentage)))]),g(i,l)});var ae=o(kt,2);{var se=i=>{var e=Oe();g(i,e)};S(ae,i=>{t(k)===0&&i(se)})}a(jt),w(2),a(Nt),a(Q);var Z=o(Q,2),tt=s(Z),et=s(tt),re=s(et);Te(re,{class:"w-5 h-5 text-cyan-400"}),w(),a(et);var At=o(et,2),Rt=s(At);A(Rt,1,()=>t(P),R,(i,e)=>{var l=Fe(),d=s(l),r=s(d),p=s(r,!0);a(r);var v=o(r,2),f=s(v);a(v),a(d);var u=o(d,2),_=s(u);a(u),a(l),M(y=>{x(p,(t(e),n(()=>t(e).method==="transfer"?"Transferencia":t(e).method==="cash"?"Efectivo":t(e).method))),x(f,`${t(e),n(()=>t(e).amount)??""}€ (${y??""}%)`),j(_,`width: ${t(e),n(()=>t(e).percent)??""}%`)},[()=>(t(e),n(()=>Math.round(t(e).percent)))]),g(i,l)});var de=o(Rt,2);{var ie=i=>{var e=He();g(i,e)};S(de,i=>{t(P),n(()=>t(P).length===0)&&i(ie)})}a(At),a(tt);var St=o(tt,2),at=s(St),le=s(at);Pe(le,{class:"w-5 h-5 text-yellow-500"}),w(),a(at);var Bt=o(at,2),Ct=s(Bt);A(Ct,1,()=>t(T),R,(i,e)=>{var l=Ue(),d=s(l),r=s(d),p=s(r,!0);a(r);var v=o(r,2),f=s(v);a(v),a(d);var u=o(d,2),_=s(u);a(u),a(l),M(()=>{x(p,(t(e),n(()=>t(e).name))),x(f,`${t(e),n(()=>t(e).count)??""} alumnos`),j(_,`width: ${t(e),n(()=>t(e).percent)??""}%`)}),g(i,l)});var oe=o(Ct,2);{var ne=i=>{var e=qe();g(i,e)};S(oe,i=>{t(T),n(()=>t(T).length===0)&&i(ne)})}a(Bt),a(St),a(Z);var Et=o(Z,2),Pt=s(Et),st=s(Pt),ve=s(st);lt(ve,{class:"w-5 h-5 text-pink-500"}),w(),a(st);var Tt=o(st,2),It=s(Tt);A(It,1,()=>t(N),R,(i,e)=>{var l=Ve(),d=s(l),r=s(d),p=s(r,!0);a(r);var v=o(r,2),f=s(v);a(v),a(d);var u=o(d,2),_=s(u);a(u),a(l),M(()=>{x(p,(t(e),n(()=>t(e).name))),x(f,`${t(e),n(()=>t(e).rate)??""}% (${t(e),n(()=>t(e).count)??""} sesiones)`),j(_,`width: ${t(e),n(()=>t(e).rate)??""}%`)}),g(i,l)});var ce=o(It,2);{var pe=i=>{var e=We();g(i,e)};S(ce,i=>{t(N),n(()=>t(N).length===0)&&i(pe)})}a(Tt),a(Pt),a(Et),a(I),M(()=>{x(Vt,`${t(C)??""}%`),j(Yt,`width: ${t(C)??""}%`),x(Gt,`${t(B)??""}€`),x(Qt,t(k))}),$e(1,I,()=>Se),g(z,I),Ae(),K()}export{ia as component};
