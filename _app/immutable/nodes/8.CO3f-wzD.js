import{l as Se,e as Ie,g as Ae,a as _,d as Rt,p as pe,f as I,c as b,j as Ne,b as ha,s as xa,h as at}from"../chunks/DfPprva0.js";import{I as Ee,a as je,i as nt,s as A,e as re,d as ie,b as he,l as fa}from"../chunks/SDohX1Oa.js";import{f as be,p as it,l as w,h as lt,t as V,a as dt,v as ae,g as e,m as f,s as l,c as s,u as p,b as m,r,j as $e,n as xe}from"../chunks/B4zm7d7r.js";import{i as ue}from"../chunks/CPpFl6Wl.js";import{c as rt}from"../chunks/CjI_z-5R.js";import{g as ba}from"../chunks/BIUMDTLF.js";import{b as Tt}from"../chunks/CLQpBtLO.js";import{a as Pt,s as _a}from"../chunks/l-0K12sd.js";import{n as Ct}from"../chunks/C0n51YRF.js";import{T as ot}from"../chunks/D3cfiXoy.js";import{D as ya}from"../chunks/DWzEPwmh.js";import{U as Gt}from"../chunks/B8Kjdszw.js";import{U as Ce}from"../chunks/CxlzOQ1b.js";import{f as wa}from"../chunks/BviiYr3T.js";import{C as St}from"../chunks/BilkHblz.js";import{P as It}from"../chunks/BM_bgsCv.js";import{C as Nt}from"../chunks/C5cdKR88.js";import{A as $a}from"../chunks/DDbj7e-1.js";import{T as fe}from"../chunks/g4oizyDh.js";import{C as Et}from"../chunks/DxJCryu2.js";import{B as st}from"../chunks/B4FdaYO9.js";import{S as Da}from"../chunks/CaBxdHJy.js";import{T as ka}from"../chunks/BSZTvWx9.js";import{C as jt}from"../chunks/BdW66KU-.js";import{C as Lt}from"../chunks/rOygVeRG.js";import{T as Aa}from"../chunks/B5-xD-pM.js";function Ma(Y,$){const z=Se($,["children","$$slots","$$events","$$legacy"]);const T=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326"}]];Ee(Y,Ie({name:"bell"},()=>z,{get iconNode(){return T},children:(N,P)=>{var y=Ae(),q=be(y);je(q,$,"default",{}),_(N,y)},$$slots:{default:!0}}))}function Ta(Y,$){const z=Se($,["children","$$slots","$$events","$$legacy"]);const T=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];Ee(Y,Ie({name:"grip-vertical"},()=>z,{get iconNode(){return T},children:(N,P)=>{var y=Ae(),q=be(y);je(q,$,"default",{}),_(N,y)},$$slots:{default:!0}}))}function Pa(Y,$){const z=Se($,["children","$$slots","$$events","$$legacy"]);const T=[["path",{d:"M14 17H5"}],["path",{d:"M19 7h-9"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]];Ee(Y,Ie({name:"settings-2"},()=>z,{get iconNode(){return T},children:(N,P)=>{var y=Ae(),q=be(y);je(q,$,"default",{}),_(N,y)},$$slots:{default:!0}}))}function Ca(Y,$){const z=Se($,["children","$$slots","$$events","$$legacy"]);const T=[["path",{d:"M16 17h6v-6"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7"}]];Ee(Y,Ie({name:"trending-down"},()=>z,{get iconNode(){return T},children:(N,P)=>{var y=Ae(),q=be(y);je(q,$,"default",{}),_(N,y)},$$slots:{default:!0}}))}Rt(["click"]);var Sa=Ne('<line class="stroke-slate-700/30" stroke-width="1" stroke-dasharray="4 4"></line>'),Ia=Ne('<circle r="3" class="fill-slate-900 stroke-emerald-500 stroke-2 group-hover:r-4 transition-all"></circle>'),Na=I("<span> </span>"),Ea=I('<div class="bg-[#1e293b] border border-slate-800 rounded-xl p-6 hover:border-emerald-500/30 transition-all duration-300 group"><div class="flex justify-between items-start mb-6"><div><h3 class="text-slate-400 text-sm font-medium">Ingresos Estimados</h3> <div class="flex items-baseline gap-2 mt-1"><span class="text-2xl font-bold text-white"> </span> <span class="text-emerald-400 text-xs font-medium flex items-center bg-emerald-500/10 px-1.5 py-0.5 rounded-full"><!> </span></div></div> <div class="p-2 bg-emerald-500/10 rounded-lg group-hover:bg-emerald-500/20 transition-colors"><!></div></div> <div class="relative h-[150px] w-full overflow-hidden"><svg class="w-full h-full transform transition-transform duration-500 group-hover:scale-[1.02]"><defs><linearGradient id="revenueGradient" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#10b981" stop-opacity="0.2"></stop><stop offset="100%" stop-color="#10b981" stop-opacity="0"></stop></linearGradient></defs><!><path fill="url(#revenueGradient)"></path><path fill="none" stroke="#10b981" stroke-width="2" vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round"></path><!></svg> <div class="absolute bottom-0 left-0 right-0 flex justify-between px-2 text-[10px] text-slate-500 font-medium"></div></div></div>');function ja(Y,$){it($,!1);const z=f(),T=f(),N=f(),P=f();let y=pe($,"data",24,()=>[0,0,0,0,0,0]),q=pe($,"labels",24,()=>["","","","","",""]),_e=pe($,"totalRevenue",8,0),K=pe($,"trendPercentage",8,0);const E=150,j=300,D=20;w(()=>ae(y()),()=>{m(z,Math.max(...y(),100)*1.1)}),w(()=>ae(y()),()=>{m(T,Math.min(...y())*.8)}),w(()=>(ae(y()),e(T),e(z)),()=>{m(N,y().map((U,R)=>{const G=R/(y().length-1)*(j-2*D)+D,oe=E-D-(U-e(T))/(e(z)-e(T))*(E-2*D);return`${G},${oe}`}).join(" "))}),w(()=>e(N),()=>{m(P,`${D},${E-D} ${e(N)} ${j-D},${E-D}`)}),lt(),nt();var Q=Ea(),W=s(Q),B=s(W),X=l(s(B),2),le=s(X),F=s(le);r(le);var de=l(le,2),Z=s(de);ot(Z,{class:"w-3 h-3 mr-1"});var ee=l(Z);r(de),r(X),r(B);var ce=l(B,2),me=s(ce);ya(me,{class:"w-5 h-5 text-emerald-500"}),r(ce),r(W);var d=l(W,2),se=s(d);A(se,"viewBox","0 0 300 150");var S=l(s(se));re(S,0,()=>[0,1,2,3],ie,(U,R)=>{var G=Sa();A(G,"x1",D),A(G,"x2",j-D),V(()=>{A(G,"y1",E-D-R*(E-2*D)/3),A(G,"y2",E-D-R*(E-2*D)/3)}),_(U,G)});var L=l(S),M=l(L),te=l(M);re(te,1,y,ie,(U,R,G)=>{const oe=$e(()=>(ae(y()),p(()=>G/(y().length-1)*(j-2*D)+D))),ve=$e(()=>E-D-(e(R)-e(T))/(e(z)-e(T))*(E-2*D));var ne=Ia();V(()=>{A(ne,"cx",e(oe)),A(ne,"cy",e(ve))}),_(U,ne)}),r(se);var O=l(se,2);re(O,5,q,ie,(U,R)=>{var G=Na(),oe=s(G,!0);r(G),V(()=>b(oe,e(R))),_(U,G)}),r(O),r(d),r(Q),V((U,R)=>{b(F,`${U??""}â‚¬`),b(ee,` ${K()>0?"+":""}${R??""}%`),A(L,"d",e(P)),A(M,"d",`M ${e(N)}`)},[()=>(ae(_e()),p(()=>_e().toLocaleString())),()=>(ae(K()),p(()=>K().toFixed(1)))]),_(Y,Q),dt()}var La=Ne('<line class="stroke-slate-700/30" stroke-width="1" stroke-dasharray="4 4"></line>'),Ra=Ne('<rect rx="4" class="fill-blue-500/80 hover:fill-blue-400 transition-colors duration-300 cursor-pointer"></rect><text text-anchor="middle" class="fill-slate-400 text-[10px] opacity-0 group-hover:opacity-100 transition-opacity duration-300"> </text>',1),Ga=I('<span class="w-[16.6%] text-center"> </span>'),za=I('<div class="bg-[#1e293b] border border-slate-800 rounded-xl p-6 hover:border-blue-500/30 transition-all duration-300 group"><div class="flex justify-between items-start mb-6"><div><h3 class="text-slate-400 text-sm font-medium">Nuevos Alumnos</h3> <div class="flex items-baseline gap-2 mt-1"><span class="text-2xl font-bold text-white"> </span> <span class="text-blue-400 text-xs font-medium flex items-center bg-blue-500/10 px-1.5 py-0.5 rounded-full"><!> </span></div></div> <div class="p-2 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors"><!></div></div> <div class="relative h-[150px] w-full"><svg class="w-full h-full"><!><!></svg> <div class="absolute bottom-0 left-0 right-0 flex justify-between px-4 text-[10px] text-slate-500 font-medium"></div></div></div>');function Oa(Y,$){it($,!1);const z=f(),T=f(),N=f();let P=pe($,"data",24,()=>[0,0,0,0,0,0]),y=pe($,"labels",24,()=>["","","","","",""]),q=pe($,"totalNewStudents",8,0),_e=pe($,"trendText",8,"este mes");const K=150,E=300,j=20;w(()=>ae(P()),()=>{m(z,Math.max(...P(),10)*1.2)}),w(()=>ae(P()),()=>{m(T,(E-2*j)/P().length*.6)}),w(()=>ae(P()),()=>{m(N,(E-2*j)/P().length)}),lt(),nt();var D=za(),Q=s(D),W=s(Q),B=l(s(W),2),X=s(B),le=s(X,!0);r(X);var F=l(X,2),de=s(F);Gt(de,{class:"w-3 h-3 mr-1"});var Z=l(de);r(F),r(B),r(W);var ee=l(W,2),ce=s(ee);Ce(ce,{class:"w-5 h-5 text-blue-500"}),r(ee),r(Q);var me=l(Q,2),d=s(me);A(d,"viewBox","0 0 300 150");var se=s(d);re(se,0,()=>[0,1,2,3],ie,(M,te)=>{var O=La();A(O,"x1",j),A(O,"x2",E-j),V(()=>{A(O,"y1",K-j-te*(K-2*j)/3),A(O,"y2",K-j-te*(K-2*j)/3)}),_(M,O)});var S=l(se);re(S,1,P,ie,(M,te,O)=>{const U=$e(()=>j+O*e(N)+(e(N)-e(T))/2),R=$e(()=>e(te)/e(z)*(K-2*j)),G=$e(()=>K-j-e(R));var oe=Ra(),ve=be(oe),ne=l(ve),ge=s(ne,!0);r(ne),V(()=>{A(ve,"x",e(U)),A(ve,"y",e(G)),A(ve,"width",e(T)),A(ve,"height",e(R)),A(ne,"x",e(U)+e(T)/2),A(ne,"y",e(G)-5),b(ge,e(te))}),_(M,oe)}),r(d);var L=l(d,2);re(L,5,y,ie,(M,te)=>{var O=Ga(),U=s(O,!0);r(O),V(()=>b(U,e(te))),_(M,O)}),r(L),r(me),r(D),V(()=>{b(le,q()),b(Z,` ${_e()??""}`)}),_(Y,D),dt()}var Ua=I('<span class="absolute top-2 right-2 bg-indigo-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm z-10"> </span>'),Va=I('<div class="absolute inset-0 bg-black/20 rounded-2xl flex items-center justify-center"><!></div>'),Ha=I('<div role="listitem"><button><!> <div class="p-3 bg-slate-900/50 rounded-xl mb-3 group-hover:scale-110 transition-transform duration-300"><!></div> <span class="text-sm font-semibold text-slate-300 group-hover:text-white text-center leading-tight"> </span> <!></button></div>'),Ba=I('<div><div class="flex items-center gap-4"><div class="p-2 bg-slate-900 rounded-lg"><!></div> <div><p class="font-bold text-slate-200 text-sm"> </p> <p class="text-xs text-slate-500"> </p></div></div> <button> </button></div>'),Fa=I('<div class="bg-slate-800/40 border-l-4 border-amber-500 rounded-r-xl p-4 flex items-center justify-between"><div class="flex items-center gap-3"><!> <span class="text-sm text-slate-300 font-medium"> </span></div> <button class="text-xs font-bold text-amber-500 hover:text-amber-400"> </button></div>'),Ya=I('<div class="space-y-3"><h3 class="text-lg font-bold text-white flex items-center gap-2"><!> AtenciÃ³n Requerida</h3> <!> <!></div>'),qa=I('<div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-8 text-center"><div class="inline-block p-4 bg-slate-800 rounded-full mb-3"><!></div> <p class="text-slate-300 font-medium">Â¡DÃ­a libre! ðŸŽ‰</p> <p class="text-sm text-slate-500 mt-1">No tienes clases programadas para hoy.</p> <button class="mt-4 text-sm text-indigo-400 hover:text-indigo-300 font-medium">Ver horario completo â†’</button></div>'),Wa=I('<div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-5 hover:border-emerald-500/30 transition-all group flex flex-col sm:flex-row sm:items-center justify-between gap-4"><div class="flex items-center gap-4"><div class="w-12 h-12 rounded-xl bg-emerald-500/10 flex items-center justify-center text-emerald-500 font-bold text-xl border border-emerald-500/20 group-hover:scale-105 transition-transform"> </div> <div><h4 class="font-bold text-white text-lg"> </h4> <div class="flex items-center gap-3 text-sm text-slate-400 mt-1"><span class="flex items-center gap-1"><!> </span> <span class="flex items-center gap-1"><!> </span></div></div></div> <a class="bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2.5 rounded-xl font-semibold text-sm transition-colors shadow-lg shadow-emerald-900/20 text-center">Pasar Lista</a></div>'),Xa=I('<div class="grid gap-4"></div>'),Ja=I('<p class="text-lg font-bold text-white truncate"> </p> <p class="text-xs text-orange-400 mt-1"> </p>',1),Ka=I('<p class="text-lg font-bold text-slate-500">â€”</p>'),Qa=I('<div class="p-8 text-center text-slate-500 text-sm">No hay actividad reciente.</div>'),Za=I('<div class="p-4 flex gap-4 hover:bg-slate-800/30 transition-colors rounded-xl"><div class="mt-1"><div><!></div></div> <div><p class="text-sm text-slate-300 font-medium leading-snug"> </p> <p class="text-xs text-slate-500 mt-1"> </p></div></div>'),er=I('<div class="divide-y divide-slate-800"></div>'),tr=I('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12"><div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 pt-6"><div><h1 class="text-3xl font-bold text-white flex items-center gap-2">Hola, Profe <span class="animate-pulse">ðŸ‘‹</span></h1> <p class="text-slate-400 mt-1 text-lg">AquÃ­ tienes el resumen de tu academia hoy.</p></div> <div class="mt-4 md:mt-0 text-left md:text-right bg-slate-800/50 px-4 py-2 rounded-xl border border-slate-700/50"><p class="text-xs text-slate-400 uppercase font-bold tracking-wider">Hoy es</p> <p class="text-xl font-bold text-white capitalize flex items-center gap-2"><!> </p></div></div> <div class="mb-10"><div class="flex justify-between items-center mb-4"><h2 class="text-lg font-bold text-white flex items-center gap-2"><!> Accesos Directos</h2> <button><!> </button></div> <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 md:gap-4" role="list"></div></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-10"><div class="lg:col-span-2 space-y-8"><!> <div><h3 class="text-lg font-bold text-white flex items-center gap-2 mb-4"><!> Clases de Hoy</h3> <!></div> <div class="grid grid-cols-2 sm:grid-cols-4 gap-4"><div class="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50"><p class="text-slate-500 text-xs font-bold uppercase mb-1">Alumnos</p> <p class="text-2xl font-bold text-white"> </p> <p class="text-xs text-emerald-400 mt-1 flex items-center gap-1"><!> Activos</p></div> <div class="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50"><p class="text-slate-500 text-xs font-bold uppercase mb-1">Ingresos (Mes)</p> <p class="text-2xl font-bold text-white"> </p> <p><!> </p></div> <div class="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50"><p class="text-slate-500 text-xs font-bold uppercase mb-1">Asistencia</p> <p class="text-2xl font-bold text-white"> </p> <p class="text-xs text-blue-400 mt-1">Promedio global</p></div> <div class="bg-[#1e293b] p-4 rounded-2xl border border-slate-700/50"><p class="text-slate-500 text-xs font-bold uppercase mb-1">PrÃ³x. Torneo</p> <!></div></div></div> <div class="space-y-6"><h3 class="text-lg font-bold text-white flex items-center gap-2"><!> Actividad Reciente</h3> <div class="bg-[#1e293b] border border-slate-700 rounded-2xl p-2 max-h-[500px] overflow-y-auto custom-scrollbar"><!></div> <div class="bg-gradient-to-br from-indigo-900/50 to-purple-900/50 rounded-2xl p-6 border border-indigo-500/30 text-center"><!> <h4 class="text-white font-bold mb-1">Â¡Nuevo Logro Desbloqueado?</h4> <p class="text-sm text-indigo-200 mb-4">Revisa si has subido de nivel como entrenador.</p> <button class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg shadow-indigo-500/20 transition-all w-full">Ver Mis Logros</button></div></div></div> <div class="border-t border-slate-800 pt-8"><h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2"><!> AnÃ¡lisis Detallado</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <!></div></div></div>');function Pr(Y,$){it($,!1);const z=()=>ha(Pt,"$appStore",T),[T,N]=xa(),P=f(),y=f(),q=f(),_e=f(),K=f(),E=f(),j=f(),D=f(),Q=f(),W=f(),B=f(),X=f(),le=f(),F=f(),de=f(),Z=f(),ee=f(),ce=f(),me=f();let d=f(z());Pt.subscribe(a=>m(d,a));const se=[{id:"centers",title:"Centros Educativos",desc:"Gestionar centros y ubicaciones",icon:Da,color:"text-blue-500",hover:"hover:border-blue-500/50",link:"centros"},{id:"classes",title:"Clases",desc:"Organizar grupos y horarios",icon:st,color:"text-purple-500",hover:"hover:border-purple-500/50",link:"clases"},{id:"students",title:"Estudiantes",desc:"Gestionar alumnado e inscripciones",icon:Ce,color:"text-emerald-500",hover:"hover:border-emerald-500/50",link:"alumnos"},{id:"skills",title:"Habilidades",desc:"Definir temarios y competencias",icon:ka,color:"text-yellow-500",hover:"hover:border-yellow-500/50",link:"habilidades"},{id:"tournaments",title:"Gestionar Torneos",desc:"Organizar competiciones locales",icon:fe,color:"text-orange-500",hover:"hover:border-orange-500/50",link:"torneos"},{id:"attendance",title:"Control de Asistencia",desc:"Pasar lista y estadÃ­sticas",icon:jt,color:"text-pink-500",hover:"hover:border-pink-500/50",link:"asistencia"},{id:"reports",title:"Informes",desc:"Reportes y anÃ¡lisis avanzados",icon:Et,color:"text-cyan-500",hover:"hover:border-cyan-500/50",link:"informes"},{id:"payments",title:"Sistema de Pagos",desc:"Gestionar cobros y facturaciÃ³n",icon:Lt,color:"text-teal-500",hover:"hover:border-teal-500/50",link:"pagos",badge:"BETA"},{id:"planner",title:"Planificador",desc:"DiseÃ±ar sesiones y contenido",icon:It,color:"text-indigo-500",hover:"hover:border-indigo-500/50",link:"agenda",badge:"NEW"},{id:"leads",title:"CRM / Interesados",desc:"Gestionar posibles alumnos",icon:Gt,color:"text-pink-500",hover:"hover:border-pink-500/50",link:"contactos",badge:"NEW"},{id:"achievements",title:"Logros",desc:"Ver progreso y medallas",icon:fe,color:"text-amber-500",hover:"hover:border-amber-500/50",link:"logros"}];let S=f(!1),L=f(null),M=f([]);function te(a,t){m(L,t),a.dataTransfer&&(a.dataTransfer.effectAllowed="move");const o=a.currentTarget;o.style.opacity="0.4"}function O(a,t){if(a.preventDefault(),!e(L)||e(L)===t)return;const o=e(M).findIndex(c=>c.id===e(L).id),n=e(M).findIndex(c=>c.id===t.id);if(o!==-1&&n!==-1&&o!==n){const c=[...e(M)],[v]=c.splice(o,1);c.splice(n,0,v),m(M,c)}}function U(a){const t=a.currentTarget;t.style.opacity="1",m(L,null)}let R=!1;function G(a,t){if(!e(S))return;const o=a.touches[0];o.clientX,o.clientY,m(L,t),R=!0;const n=a.currentTarget;n.style.opacity="0.6",n.style.transform="scale(1.05)"}function oe(a){if(!R||!e(L))return;a.preventDefault();const t=a.touches[0],o=document.elementFromPoint(t.clientX,t.clientY);if(!o)return;const n=o.closest("[data-action-id]");if(!n)return;const c=n.getAttribute("data-action-id"),v=e(M).find(i=>i.id===c);if(v&&v!==e(L)){const i=e(M).findIndex(u=>u.id===e(L).id),g=e(M).findIndex(u=>u.id===v.id);if(i!==-1&&g!==-1&&i!==g){const u=[...e(M)],[k]=u.splice(i,1);u.splice(g,0,k),m(M,u)}}}function ve(a){if(!R)return;const t=a.currentTarget;t.style.opacity="1",t.style.transform="scale(1)",R=!1,m(L,null)}function ne(){e(S)&&(_a.updateDashboardLayout(e(M).map(a=>a.id)),Ct.success("DiseÃ±o del dashboard guardado.")),m(S,!e(S))}function ge(a){if(a==="pagos"&&e(d).settings.plan==="free"){Ct.warning("El Sistema de Pagos solo estÃ¡ disponible en los planes Profe y Club.");return}ba(`${Tt}/panel/${a}`)}const zt=new Date().toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"});function ct(a){const t=new Date(a),n=new Date().getTime()-t.getTime(),c=Math.floor(n/6e4),v=Math.floor(c/60),i=Math.floor(v/24);return c<60?`hace ${c} min`:v<24?`hace ${v}h`:i===1?"ayer":i<7?`hace ${i} dÃ­as`:t.toLocaleDateString("es-ES",{day:"numeric",month:"short"})}function Le(a){const t=new Date(a);return Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24))}function ye(a){const t=new Date(a),o=new Date;return Math.floor((t.getTime()-o.getTime())/(1e3*60*60*24))}const Ot=["Domingo","Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado"][new Date().getDay()];w(()=>e(d),()=>{m(P,(()=>{const a=e(d).dashboardLayout||[];if(a.length===0)return se;const t=new Map(se.map(n=>[n.id,n])),o=[];for(const n of a){const c=t.get(n);c&&(o.push(c),t.delete(n))}for(const n of t.values())o.push(n);return o})())}),w(()=>(e(S),e(P)),()=>{e(S)||m(M,[...e(P)])}),w(()=>(e(S),e(M),e(P)),()=>{m(y,e(S)?e(M):e(P))}),w(()=>e(d),()=>{m(q,e(d).students.length)}),w(()=>e(d),()=>{m(_e,e(d).payments.reduce((a,t)=>a+t.amount,0))}),w(()=>e(d),()=>{m(K,e(d).students.filter(a=>e(d).students.indexOf(a)>=e(d).students.length-Math.ceil(e(d).students.length*.2)).length)}),w(()=>e(d),()=>{m(E,e(d).payments.filter(a=>{const t=new Date;return t.setDate(t.getDate()-30),new Date(a.date)>=t}))}),w(()=>e(E),()=>{m(j,e(E).reduce((a,t)=>a+t.amount,0))}),w(()=>e(d),()=>{m(D,(()=>{if(e(d).attendance.length===0)return 0;const a=e(d).attendance.map(t=>{const o=t.records.length,n=t.records.filter(c=>c.status==="present").length;return o>0?n/o*100:0});return Math.round(a.reduce((t,o)=>t+o,0)/a.length)})())}),w(()=>(e(d),fe),()=>{m(Q,(()=>{const a=[];return e(d).students.slice(-3).reverse().forEach(t=>{a.push({type:"student",description:`Nuevo estudiante: ${t.name}`,timeAgo:"reciente",icon:Ce,color:"emerald",timestamp:Date.now()})}),e(d).payments.slice(-3).reverse().forEach(t=>{const o=e(d).students.find(n=>n.id===t.studentId);a.push({type:"payment",description:`Pago: ${t.amount}â‚¬ - ${o?.name||"Desconocido"}`,timeAgo:ct(t.date),icon:Lt,color:"teal",timestamp:new Date(t.date).getTime()})}),e(d).tournaments.slice(-2).reverse().forEach(t=>{a.push({type:"tournament",description:`Torneo: ${t.name}`,timeAgo:ct(t.date),icon:fe,color:"orange",timestamp:new Date(t.date).getTime()})}),a.sort((t,o)=>o.timestamp-t.timestamp).slice(0,6)})())}),w(()=>e(d),()=>{m(W,(()=>{const a=[],t=e(d).students.map(n=>{const c=e(d).attendance.flatMap(u=>u.records.filter(k=>k.studentId===n.id)),v=c.length,i=c.filter(u=>u.status==="present").length,g=v>0?i/v*100:100;return{student:n,rate:g,total:v}}).filter(n=>n.rate<70&&n.total>=3);t.length>0&&a.push({type:"warning",message:`${t.length} alumno${t.length>1?"s":""} con baja asistencia`,action:"Ver detalles",link:"alumnos"});const o=e(d).classes.filter(n=>{const c=e(d).attendance.filter(v=>v.classId===n.id).sort((v,i)=>i.date.localeCompare(v.date))[0];return!c||Le(c.date)>7});return o.length>0&&a.push({type:"info",message:`${o.length} clase${o.length>1?"s":""} sin asistencia registrada`,action:"Pasar lista",link:"asistencia"}),a})())}),w(()=>e(d),()=>{m(X,e(d).classes.filter(a=>a.schedule.toLowerCase().includes(Ot.toLowerCase())))}),w(()=>(e(d),e(X),st),()=>{m(B,(()=>{const a=[];e(d).classes.filter(i=>{const g=e(d).attendance.filter(u=>u.classId===i.id).sort((u,k)=>k.date.localeCompare(u.date))[0];return!g||Le(g.date)>3}).forEach(i=>{const g=e(d).attendance.filter(k=>k.classId===i.id).sort((k,J)=>J.date.localeCompare(k.date))[0],u=g?Le(g.date):999;a.push({type:"attendance",title:`Pasar lista: ${i.name}`,subtitle:g?`Ãšltima asistencia hace ${u} dÃ­as`:"Sin registros de asistencia",priority:u>7?"high":"medium",icon:jt,color:u>7?"red":"amber",action:"Registrar",link:"asistencia",linkParams:`?classId=${i.id}`})}),e(d).tournaments.filter(i=>i.status==="Upcoming"&&i.matches.length===0&&i.participants.length>=2).forEach(i=>{const g=ye(i.date);a.push({type:"tournament-pairings",title:`Generar emparejamientos: ${i.name}`,subtitle:`${i.participants.length} participantes inscritos`,priority:g<=2?"high":"medium",icon:fe,color:g<=2?"red":"orange",action:"Generar",link:`torneos/${i.id}`,linkParams:""})}),e(X).filter(i=>!e(d).attendance.find(u=>u.classId===i.id&&u.date===new Date().toISOString().split("T")[0])).forEach(i=>{a.push({type:"today-attendance",title:`Clase de hoy: ${i.name}`,subtitle:`${i.schedule} â€¢ ${i.students.length} alumnos`,priority:"high",icon:st,color:"purple",action:"Pasar lista",link:"asistencia",linkParams:`?classId=${i.id}`})}),e(d).tournaments.filter(i=>i.status==="Upcoming"&&ye(i.date)<=2&&ye(i.date)>=0&&i.participants.length<4).forEach(i=>{a.push({type:"tournament-participants",title:`Inscribir participantes: ${i.name}`,subtitle:`Solo ${i.participants.length} inscritos â€¢ Empieza en ${ye(i.date)} dÃ­a${ye(i.date)!==1?"s":""}`,priority:"medium",icon:fe,color:"blue",action:"Inscribir",link:`torneos/${i.id}`,linkParams:""})});const v={high:0,medium:1,low:2};return a.sort((i,g)=>(v[i.priority]??99)-(v[g.priority]??99))})())}),w(()=>{},()=>{m(le,Array.from({length:6},(a,t)=>{const o=new Date;o.setMonth(o.getMonth()-(5-t));const n=o.toLocaleDateString("es-ES",{month:"short"});return n.charAt(0).toUpperCase()+n.slice(1)}))}),w(()=>e(d),()=>{m(F,Array.from({length:6},(a,t)=>{const o=new Date;o.setMonth(o.getMonth()-(5-t));const n=o.getMonth(),c=o.getFullYear();return e(d).payments.filter(v=>{const i=new Date(v.date);return i.getMonth()===n&&i.getFullYear()===c}).reduce((v,i)=>v+i.amount,0)}))}),w(()=>e(F),()=>{m(de,e(F)[5]||0)}),w(()=>e(F),()=>{m(Z,e(F)[4]>0?(e(F)[5]-e(F)[4])/e(F)[4]*100:0)}),w(()=>e(d),()=>{m(ee,Array.from({length:6},(a,t)=>{const o=new Date;o.setMonth(o.getMonth()-(5-t));const n=o.getMonth(),c=o.getFullYear();return e(d).students.filter(v=>{if(!v.joinedAt)return!1;const i=new Date(v.joinedAt);return i.getMonth()===n&&i.getFullYear()===c}).length}))}),w(()=>e(ee),()=>{m(ce,e(ee)[5]||0)}),w(()=>(e(ce),e(ee)),()=>{m(me,e(ce)>=e(ee)[4]?"este mes":"baja activ.")}),lt(),nt();var Re=tr(),Ge=s(Re),vt=l(s(Ge),2),ut=l(s(vt),2),pt=s(ut);St(pt,{class:"w-5 h-5 text-indigo-400"});var Ut=l(pt);r(ut),r(vt),r(Ge);var ze=l(Ge,2),Oe=s(ze),Ue=s(Oe),Vt=s(Ue);It(Vt,{class:"w-5 h-5 text-indigo-500"}),xe(),r(Ue);var Me=l(Ue,2);Me.__click=ne;var mt=s(Me);Pa(mt,{class:"w-3.5 h-3.5"});var Ht=l(mt);r(Me),r(Oe);var gt=l(Oe,2);re(gt,13,()=>e(y),a=>a.id,(a,t)=>{var o=Ha();o.__touchstart=h=>G(h,e(t)),o.__touchmove=oe,o.__touchend=ve;var n=s(o);n.__click=()=>!e(S)&&ge(e(t).link);var c=s(n);{var v=h=>{var C=Ua(),H=s(C,!0);r(C),V(()=>b(H,(e(t),p(()=>e(t).badge)))),_(h,C)};ue(c,h=>{e(t),p(()=>e(t).badge)&&h(v)})}var i=l(c,2),g=s(i);rt(g,()=>e(t).icon,(h,C)=>{C(h,{get class(){return`w-6 h-6 ${e(t),p(()=>e(t).color)??""}`}})}),r(i);var u=l(i,2),k=s(u,!0);r(u);var J=l(u,2);{var x=h=>{var C=Va(),H=s(C);Ta(H,{class:"w-6 h-6 text-white/80"}),r(C),_(h,C)};ue(J,h=>{e(S)&&h(x)})}r(n),r(o),V(()=>{A(o,"draggable",e(S)),A(o,"data-action-id",(e(t),p(()=>e(t).id))),he(o,1,`relative transition-all duration-200 ${e(L),e(t),p(()=>e(L)?.id===e(t).id?"scale-105 z-10 opacity-50":"")??""}`),he(n,1,`group flex flex-col items-center justify-center p-4 bg-[#1e293b] hover:bg-slate-800 rounded-2xl border border-slate-700/50 hover:border-slate-600 transition-all duration-300 w-full aspect-square md:aspect-auto md:h-32 shadow-lg hover:shadow-xl hover:-translate-y-1 relative ${e(S)?"cursor-move border-dashed border-slate-500":"cursor-pointer"}`),b(k,(e(t),p(()=>e(t).title)))}),at("dragstart",o,h=>te(h,e(t))),at("dragover",o,h=>O(h,e(t))),at("dragend",o,h=>U(h)),fa(o,()=>wa,()=>({duration:300})),_(a,o)}),r(gt),r(ze);var Ve=l(ze,2),He=s(Ve),ht=s(He);{var Bt=a=>{var t=Ya(),o=s(t),n=s(o);Ma(n,{class:"w-5 h-5 text-amber-500"}),xe(),r(o);var c=l(o,2);{var v=g=>{var u=Ae(),k=be(u);re(k,1,()=>(e(B),p(()=>e(B).slice(0,3))),ie,(J,x)=>{var h=Ba(),C=s(h),H=s(C),we=s(H);rt(we,()=>e(x).icon,(ma,ga)=>{ga(ma,{get class(){return`w-5 h-5 text-${e(x),p(()=>e(x).color)??""}-500`}})}),r(H);var De=l(H,2),ke=s(De),tt=s(ke,!0);r(ke);var Te=l(ke,2),ua=s(Te,!0);r(Te),r(De),r(C);var Pe=l(C,2);Pe.__click=()=>ge(`${e(x).link}${e(x).linkParams||""}`);var pa=s(Pe,!0);r(Pe),r(h),V(()=>{he(h,1,`bg-slate-800/40 border-l-4 border-${e(x),p(()=>e(x).color)??""}-500 rounded-r-xl p-4 flex items-center justify-between hover:bg-slate-800/60 transition-colors`),b(tt,(e(x),p(()=>e(x).title))),b(ua,(e(x),p(()=>e(x).subtitle))),he(Pe,1,`text-xs font-bold bg-${e(x),p(()=>e(x).color)??""}-500/10 text-${e(x),p(()=>e(x).color)??""}-400 px-3 py-1.5 rounded-lg hover:bg-${e(x),p(()=>e(x).color)??""}-500/20 transition-colors`),b(pa,(e(x),p(()=>e(x).action)))}),_(J,h)}),_(g,u)};ue(c,g=>{e(B),p(()=>e(B).length>0)&&g(v)})}var i=l(c,2);re(i,1,()=>(e(W),p(()=>e(W).slice(0,2))),ie,(g,u)=>{var k=Fa(),J=s(k),x=s(J);Aa(x,{class:"w-5 h-5 text-amber-500"});var h=l(x,2),C=s(h,!0);r(h),r(J);var H=l(J,2);H.__click=()=>ge(e(u).link);var we=s(H);r(H),r(k),V(()=>{b(C,(e(u),p(()=>e(u).message))),b(we,`${e(u),p(()=>e(u).action)??""} â†’`)}),_(g,k)}),r(t),_(a,t)};ue(ht,a=>{e(W),e(B),p(()=>e(W).length>0||e(B).length>0)&&a(Bt)})}var Be=l(ht,2),Fe=s(Be),Ft=s(Fe);Nt(Ft,{class:"w-5 h-5 text-emerald-500"}),xe(),r(Fe);var Yt=l(Fe,2);{var qt=a=>{var t=qa(),o=s(t),n=s(o);St(n,{class:"w-8 h-8 text-slate-500"}),r(o);var c=l(o,6);c.__click=()=>ge("clases"),r(t),_(a,t)},Wt=a=>{var t=Xa();re(t,5,()=>e(X),ie,(o,n)=>{var c=Wa(),v=s(c),i=s(v),g=s(i,!0);r(i);var u=l(i,2),k=s(u),J=s(k,!0);r(k);var x=l(k,2),h=s(x),C=s(h);Nt(C,{class:"w-3.5 h-3.5"});var H=l(C);r(h);var we=l(h,2),De=s(we);Ce(De,{class:"w-3.5 h-3.5"});var ke=l(De);r(we),r(x),r(u),r(v);var tt=l(v,2);r(c),V(Te=>{b(g,Te),b(J,(e(n),p(()=>e(n).name))),b(H,` ${e(n),p(()=>e(n).schedule)??""}`),b(ke,` ${e(n),p(()=>e(n).students.length)??""} alumnos`),A(tt,"href",`${Tt??""}/panel/asistencia?classId=${e(n),p(()=>e(n).id)??""}`)},[()=>(e(n),p(()=>e(n).name.charAt(0)))]),_(o,c)}),r(t),_(a,t)};ue(Yt,a=>{e(X),p(()=>e(X).length===0)?a(qt):a(Wt,!1)})}r(Be);var xt=l(Be,2),Ye=s(xt),qe=l(s(Ye),2),Xt=s(qe,!0);r(qe);var ft=l(qe,2),Jt=s(ft);ot(Jt,{class:"w-3 h-3"}),xe(),r(ft),r(Ye);var We=l(Ye,2),Xe=l(s(We),2),Kt=s(Xe);r(Xe);var Je=l(Xe,2),bt=s(Je);{var Qt=a=>{ot(a,{class:"w-3 h-3"})},Zt=a=>{Ca(a,{class:"w-3 h-3"})};ue(bt,a=>{e(Z)>=0?a(Qt):a(Zt,!1)})}var ea=l(bt);r(Je),r(We);var Ke=l(We,2),_t=l(s(Ke),2),ta=s(_t);r(_t),xe(2),r(Ke);var yt=l(Ke,2),aa=l(s(yt),2);{var ra=a=>{const t=$e(()=>(e(d),p(()=>e(d).tournaments.filter(g=>g.status==="Upcoming")[0])));var o=Ja(),n=be(o),c=s(n,!0);r(n);var v=l(n,2),i=s(v);r(v),V(g=>{b(c,(ae(e(t)),p(()=>e(t).name))),b(i,`${g??""} dÃ­as`)},[()=>(ae(e(t)),p(()=>ye(e(t).date)))]),_(a,o)},sa=a=>{var t=Ka();_(a,t)};ue(aa,a=>{e(d),p(()=>e(d).tournaments.filter(t=>t.status==="Upcoming").length>0)?a(ra):a(sa,!1)})}r(yt),r(xt),r(He);var wt=l(He,2),Qe=s(wt),oa=s(Qe);$a(oa,{class:"w-5 h-5 text-blue-500"}),xe(),r(Qe);var Ze=l(Qe,2),na=s(Ze);{var ia=a=>{var t=Qa();_(a,t)},la=a=>{var t=er();re(t,5,()=>e(Q),ie,(o,n)=>{var c=Za(),v=s(c),i=s(v),g=s(i);rt(g,()=>e(n).icon,(C,H)=>{H(C,{get class(){return`w-4 h-4 text-${e(n),p(()=>e(n).color)??""}-500`}})}),r(i),r(v);var u=l(v,2),k=s(u),J=s(k,!0);r(k);var x=l(k,2),h=s(x,!0);r(x),r(u),r(c),V(()=>{he(i,1,`w-8 h-8 rounded-full bg-${e(n),p(()=>e(n).color)??""}-500/20 flex items-center justify-center border border-${e(n),p(()=>e(n).color)??""}-500/30`),b(J,(e(n),p(()=>e(n).description))),b(h,(e(n),p(()=>e(n).timeAgo)))}),_(o,c)}),r(t),_(a,t)};ue(na,a=>{e(Q),p(()=>e(Q).length===0)?a(ia):a(la,!1)})}r(Ze);var $t=l(Ze,2),Dt=s($t);fe(Dt,{class:"w-10 h-10 text-yellow-400 mx-auto mb-3"});var da=l(Dt,6);da.__click=()=>ge("logros"),r($t),r(wt),r(Ve);var kt=l(Ve,2),et=s(kt),ca=s(et);Et(ca,{class:"w-5 h-5 text-slate-400"}),xe(),r(et);var At=l(et,2),Mt=s(At);ja(Mt,{get data(){return e(F)},get labels(){return e(le)},get totalRevenue(){return e(de)},get trendPercentage(){return e(Z)}});var va=l(Mt,2);Oa(va,{get data(){return e(ee)},get labels(){return e(le)},get totalNewStudents(){return e(ce)},get trendText(){return e(me)}}),r(At),r(kt),r(Re),V(a=>{b(Ut,` ${zt??""}`),he(Me,1,`text-xs flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-700 hover:bg-slate-800 transition-colors ${e(S)?"bg-indigo-600/20 border-indigo-500 text-indigo-400":"text-slate-400"}`),b(Ht,` ${e(S)?"Guardar Orden":"Personalizar"}`),b(Xt,(e(d),p(()=>e(d).students.length))),b(Kt,`${e(de)??""}â‚¬`),he(Je,1,`text-xs ${e(Z)>=0?"text-emerald-400":"text-red-400"} mt-1 flex items-center gap-1`),b(ea,` ${a??""}% vs mes ant.`),b(ta,`${e(D)??""}%`)},[()=>(e(Z),p(()=>Math.round(e(Z))))]),_(Y,Re),dt(),N()}Rt(["click","touchstart","touchmove","touchend"]);export{Pr as component};
